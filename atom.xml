<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Chengcw&#39;博客</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-08-05T01:06:07.595Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>ChengWei</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>vue3</title>
    <link href="http://example.com/2019/03/02/%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%85%AD%E7%AF%87/"/>
    <id>http://example.com/2019/03/02/%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%85%AD%E7%AF%87/</id>
    <published>2019-03-02T07:15:36.000Z</published>
    <updated>2022-08-05T01:06:07.595Z</updated>
    
    <content type="html"><![CDATA[<p><b>1.介绍vue</b></p><p>Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue 也完全能够为复杂的单页应用提供驱动。</p><p>MVVM（Model-View-ViewModel）架构</p><p>『View』：视图层（UI 用户界面）<br>『ViewModel』：业务逻辑层（一切 js 可视为业务逻辑）<br>『Model』：数据层（存储数据及对数据的处理如增删改查）</p><img src="https://img-blog.csdnimg.cn/a5c02dc81b9547a6bebfd9dbc3502687.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bCP5ruhenM=,size_20,color_FFFFFF,t_70,g_se,x_16" class=""><p><b>2.回顾vue2 对比 vue3</b><br>我们看如下图</p><p>发现传统的vue2 逻辑比较分散 可读性差 可维护性差</p><p>对比vue3 逻辑分明 可维护性 高</p><img src="https://img-blog.csdnimg.cn/img_convert/e8ad905d83aaec45451797517ef453aa.png" class=""><p><b>3.Vue3 新特性介绍</b></p><img src="https://img-blog.csdnimg.cn/f2c9d2e9576d46cf8a9a3e8abc5b31b2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bCP5ruhenM=,size_20,color_FFFFFF,t_70,g_se,x_16" class=""><p>重写双向绑定</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">vue2</span><br><span class="line">基于<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>()实现</span><br><span class="line"> </span><br><span class="line">vue3 基于<span class="title class_">Proxy</span></span><br><span class="line">proxy与<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(obj, prop, desc)方式相比有以下优势：</span><br><span class="line"> </span><br><span class="line"><span class="comment">//丢掉麻烦的备份数据</span></span><br><span class="line"><span class="comment">//省去for in 循环</span></span><br><span class="line"><span class="comment">//可以监听数组变化</span></span><br><span class="line"><span class="comment">//代码更简化</span></span><br><span class="line"><span class="comment">//可以监听动态新增的属性；</span></span><br><span class="line"><span class="comment">//可以监听删除的属性 ；</span></span><br><span class="line"><span class="comment">//可以监听数组的索引和 length 属性；</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">let</span> proxyObj = <span class="keyword">new</span> <span class="title class_">Proxy</span>(obj,&#123;</span><br><span class="line">        get : <span class="keyword">function</span> (<span class="params">target,prop</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> prop <span class="keyword">in</span> target ? target[prop] : <span class="number">0</span></span><br><span class="line">        &#125;,</span><br><span class="line">        set : <span class="keyword">function</span> (<span class="params">target,prop,value</span>) &#123;</span><br><span class="line">            target[prop] = <span class="number">888</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Vue3 优化Vdom<br>在Vue2中,每次更新diff,都是全量对比,Vue3则只对比带有标记的,这样大大减少了非动态内容的对比消耗</p><p>Vue Template Explorer 我们可以通过这个网站看到静态标记</p><img src="https://img-blog.csdnimg.cn/0b5650888b95431c8682836a68e2ca98.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bCP5ruhenM=,size_20,color_FFFFFF,t_70,g_se,x_16" class=""><p>patch flag 优化静态树</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;msg&#125;&#125;/span&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello world! <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Vue3 编译后的 Vdom 是这个样子的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">_ctx，_cache，$props，$setup，$data，$options</span>)&#123;<span class="keyword">return</span> (<span class="title function_">_openBlock</span>(),<span class="title function_">_createBlock</span>(_Fragment,<span class="literal">null</span>，[</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>,<span class="string">&quot;Hello world ! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>,<span class="literal">null</span>，<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>，<span class="literal">null</span>，<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>，<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createVNode</span>(<span class="string">&quot;span&quot;</span>, <span class="literal">null</span>，<span class="title function_">_toDisplaystring</span>(_ctx.<span class="property">msg</span>)，<span class="number">1</span><span class="comment">/* TEXT */</span>)，</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>，<span class="string">&quot;Hello world! &quot;</span>),</span><br><span class="line"><span class="title function_">_createvNode</span>( <span class="string">&quot;span&quot;</span>, <span class="literal">null</span>，<span class="string">&quot;Hello world! &quot;</span>)]，<span class="number">64</span><span class="comment">/*STABLE_FRAGMENT */</span>))</span><br></pre></td></tr></table></figure><p>新增了 patch flag 标记</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">TEXT = 1 // 动态文本节点</span><br><span class="line">CLASS=1&lt;&lt;1,1 // 2//动态class</span><br><span class="line">STYLE=1&lt;&lt;2，// 4 //动态style</span><br><span class="line">PROPS=1&lt;&lt;3,// 8 //动态属性，但不包含类名和样式</span><br><span class="line">FULLPR0PS=1&lt;&lt;4,// 16 //具有动态key属性，当key改变时，需要进行完整的diff比较。</span><br><span class="line">HYDRATE_ EVENTS = 1 &lt;&lt; 5，// 32 //带有监听事件的节点</span><br><span class="line">STABLE FRAGMENT = 1 &lt;&lt; 6, // 64 //一个不会改变子节点顺序的fragment</span><br><span class="line">KEYED_ FRAGMENT = 1 &lt;&lt; 7, // 128 //带有key属性的fragment 或部分子字节有key</span><br><span class="line">UNKEYED FRAGMENT = 1&lt;&lt; 8, // 256 //子节点没有key 的fragment</span><br><span class="line">NEED PATCH = 1 &lt;&lt; 9, // 512 //一个节点只会进行非props比较</span><br><span class="line">DYNAMIC_SLOTS = 1 &lt;&lt; 10 // 1024 // 动态slot</span><br><span class="line">HOISTED = -1 // 静态节点</span><br><span class="line">BALL = -2</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>我们发现创建动态 dom 元素的时候，Vdom 除了模拟出来了它的基本信息之外，还给它加了一个标记： 1 /* TEXT */</p><p>这个标记就叫做 patch flag（补丁标记）</p><p>patch flag 的强大之处在于，当你的 diff 算法走到 _createBlock 函数的时候，会忽略所有的静态节点，只对有标记的动态节点进行对比，而且在多层的嵌套下依然有效。</p><p>尽管 JavaScript 做 Vdom 的对比已经非常的快，但是 patch flag 的出现还是让 Vue3 的 Vdom 的性能得到了很大的提升，尤其是在针对大组件的时候。</p><p>Vue3 Fragment<br>vue3 允许我们支持多个根节点</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>12<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span>23<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            <span class="tag">&lt;&gt;</span></span><br><span class="line">                &#123;this.visable ? (</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.obj.name&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                ) : (</span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.obj.price&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                )&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&#123;this.val&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">input</span>&gt;</span></span><br><span class="line">                &#123;[1, 2, 3].map((v) =&gt; &#123;</span><br><span class="line">                   return <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;v&#125;-----<span class="tag">&lt;/<span class="name">div</span>&gt;</span>;</span><br><span class="line">                &#125;)&#125;</span><br><span class="line">            <span class="tag">&lt;/&gt;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>同时新增了Suspense  和  多 v-model 用法</p><p>Vue3 Tree shaking<br>简单来讲，就是在保持代码运行结果不变的前提下，去除无用的代码</p><p>在Vue2中，无论我们使用什么功能，它们最终都会出现在生产代码中。主要原因是Vue实例在项目中是单例的，捆绑程序无法检测到该对象的哪些属性在代码中被使用到</p><p>而Vue3源码引入tree shaking特性，将全局 API 进行分块。如果你不使用其某些功能，它们将不会包含在你的基础包中</p><p>就是比如你要用watch 就是import {watch} from ‘vue’ 其他的computed 没用到就不会给你打包减少体积</p><p>Vue 3 Composition Api<br>Setup 函数式编程 也叫vue Hook</p><p>例如 ref  reactive watch computed toRefs toRaws 我们会在下几个章节详解</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;b&gt;1.介绍vue&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;Vue (读音 /vjuː/，类似于 view) 是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue 被设计为可以自底向上逐层应用。Vue 的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>Vue element ui的二次封装</title>
    <link href="http://example.com/2019/03/02/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%83%E7%AF%87/"/>
    <id>http://example.com/2019/03/02/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%83%E7%AF%87/</id>
    <published>2019-03-02T07:15:36.000Z</published>
    <updated>2022-08-05T01:13:05.437Z</updated>
    
    <content type="html"><![CDATA[<p><b>一、element ui二次封装的优缺点</b></p><p>优点：组件复用性高，利于后期维护。在封装好后能极大提高开发效率，适合用于后台管理系统、页面繁多或具有多个及其相似的页面工厂系统里。</p><p>缺点：封装过程较难，封装后的页面较为单一，如不写注释代码可读性较差，不适合用于具有变化多、逻辑复杂的页面的系统。<br><b>二、element ui二次封装的过程及原理</b></p><p>主要以父传子的形式实现，将需要复用的组件进行封装成子组件，子组件内主要负责页面的展示，Props接收父组件传来的值，将需要进行的逻辑操$emit给父组件。父组件引入子组件并向子组件内传入不同的值，使页面显示不同的文字描述，接收子组件传来的值编写函数来进行逻辑操作。</p><p>主界面封装：将element ui中的表格Table、分页Pagination、Input输入框、Select搜索框等放进一个组件内，在props里定义好要从父组件接收的值，在函数里定义好 $emit传给父组件的值。</p><p>弹窗封装：将element ui中的对话框Dialog、表单Form、上传Upload等放进一个组件内，在props里定义好要从父组件接收的值，在函数里定义好 $emit传给父组件的值。<br><b>三、效果示例</b></p><img src="https://img-blog.csdnimg.cn/35b9b391ea634ab6a23131fa5b9bd6d2.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFja3pqYmFieQ==,size_20,color_FFFFFF,t_70,g_se,x_16" class=""><img src="https://img-blog.csdnimg.cn/dbfa38aed3604113895935a4e813a630.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAamFja3pqYmFieQ==,size_20,color_FFFFFF,t_70,g_se,x_16" class=""><p><b>四、代码编写</b><br>1.可复用的子组件主界面TableContainer</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 顶部按钮部分 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;Top&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;TopBtu&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top_btu&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in TopBtu&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:type</span>=<span class="string">&quot;item.type&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:icon</span>=<span class="string">&quot;item.icon&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">click</span>=<span class="string">&quot;cast(item.incident)&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span>&#123;&#123; item.label &#125;&#125;&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!-- 搜索框部分 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;searchK&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;searchK&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;searchform&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;searchform&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;100px&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;searchinput&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in searchK&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:label</span>=<span class="string">&quot;item.label&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:prop</span>=<span class="string">&quot;item.prop&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">label-width</span>=<span class="string">&quot;150px&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;number&#x27; || item.type === &#x27;text&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:type</span>=<span class="string">&quot;item.type&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:placeholder</span>=<span class="string">&quot;&#x27;请输入要搜索的&#x27; + item.label&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;searchform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">clearable</span></span></span><br><span class="line"><span class="tag">                <span class="attr">style</span>=<span class="string">&quot;width: 220px&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;select&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:placeholder</span>=<span class="string">&quot;&#x27;请输入&#x27; + item.label&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;searchform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-for</span>=<span class="string">&quot;item in options&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:label</span>=<span class="string">&quot;item.label&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">&lt;!--搜索框按钮部分--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">icon</span>=<span class="string">&quot;el-icon-search&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">item</span></span></span><br><span class="line"><span class="tag">                @<span class="attr">click</span>=<span class="string">&quot;submitForm(searchform)&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>查询&lt;/el-button</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">icon</span>=<span class="string">&quot;el-icon-refresh-right&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;info&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">                @<span class="attr">click</span>=<span class="string">&quot;resetForm(searchform)&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>重置&lt;/el-button</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="comment">&lt;!--列配置按钮部分--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">class</span>=<span class="string">&quot;el-icon-menu&quot;</span></span></span><br><span class="line"><span class="tag">                @<span class="attr">click</span>=<span class="string">&quot;lieconfig&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;this.lieconfigshow == false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">size</span>=<span class="string">&quot;small&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>列配置&lt;/el-button</span><br><span class="line">              &gt;</span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">                <span class="attr">style</span>=<span class="string">&quot;display: inline-block; margin-left: 30px&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-show</span>=<span class="string">&quot;this.lieconfigshow == true&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                排序<span class="tag">&lt;<span class="name">el-switch</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-model</span>=<span class="string">&quot;issortable&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">active-color</span>=<span class="string">&quot;#13ce66&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">inactive-color</span>=<span class="string">&quot;#ff4949&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:active-value</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:inactive-value</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span><span class="tag">&lt;/<span class="name">el-switch</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tooltip</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">effect</span>=<span class="string">&quot;dark&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">content</span>=<span class="string">&quot;查询&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">i</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">class</span>=<span class="string">&quot;el-icon-search&quot;</span></span></span><br><span class="line"><span class="tag">                    @<span class="attr">click</span>=<span class="string">&quot;submitForm&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">style</span>=<span class="string">&quot;font-size: 25px; color: DodgerBlue&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--列配置设置按钮部分--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tooltip</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">effect</span>=<span class="string">&quot;dark&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">content</span>=<span class="string">&quot;设置&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">el-popover</span> <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;visible&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">el-checkbox</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:indeterminate</span>=<span class="string">&quot;isIndeterminate&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">v-model</span>=<span class="string">&quot;checkAll&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                        @<span class="attr">change</span>=<span class="string">&quot;handleCheckAllChange&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span>列配置&lt;/el-checkbox</span><br><span class="line">                      &gt;</span><br><span class="line">                      <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">style</span>=<span class="string">&quot;margin-left: 80px; color: red&quot;</span></span></span><br><span class="line"><span class="tag">                        @<span class="attr">click</span>=<span class="string">&quot;reset&quot;</span></span></span><br><span class="line"><span class="tag">                        &gt;</span>重置&lt;/el-button</span><br><span class="line">                      &gt;</span><br><span class="line">                      <span class="tag">&lt;<span class="name">el-row</span> <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in tableProp&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">el-checkbox-group</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">v-model</span>=<span class="string">&quot;selecttable&quot;</span></span></span><br><span class="line"><span class="tag">                            @<span class="attr">change</span>=<span class="string">&quot;handleCheckedChange&quot;</span></span></span><br><span class="line"><span class="tag">                          &gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">el-checkbox</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">style</span>=<span class="string">&quot;margin-top: 15px&quot;</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">:label</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">                              <span class="attr">:checked</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">                              &gt;</span>&#123;&#123; item.name &#125;&#125;&lt;/el-checkbox</span><br><span class="line">                            &gt;</span><br><span class="line">                          <span class="tag">&lt;/<span class="name">el-checkbox-group</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">span</span>&gt;</span>表格宽度 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">v-model</span>=<span class="string">&quot;item.width&quot;</span></span></span><br><span class="line"><span class="tag">                            <span class="attr">style</span>=<span class="string">&quot;width: 60px; margin-top: 5px&quot;</span></span></span><br><span class="line"><span class="tag">                          &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">                          <span class="tag">&lt;<span class="name">span</span>&gt;</span>px<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;/<span class="name">el-row</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">i</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">class</span>=<span class="string">&quot;el-icon-setting&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">slot</span>=<span class="string">&quot;reference&quot;</span></span></span><br><span class="line"><span class="tag">                      <span class="attr">style</span>=<span class="string">&quot;font-size: 25px; color: DodgerBlue&quot;</span></span></span><br><span class="line"><span class="tag">                    &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">el-popover</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tooltip</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">effect</span>=<span class="string">&quot;dark&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">content</span>=<span class="string">&quot;重置&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">i</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">class</span>=<span class="string">&quot;el-icon-refresh&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">style</span>=<span class="string">&quot;font-size: 25px; color: DodgerBlue&quot;</span></span></span><br><span class="line"><span class="tag">                    @<span class="attr">click</span>=<span class="string">&quot;mainreset&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-tooltip</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;item&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">effect</span>=<span class="string">&quot;dark&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">content</span>=<span class="string">&quot;普通查询&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">i</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">class</span>=<span class="string">&quot;el-icon-d-arrow-left&quot;</span></span></span><br><span class="line"><span class="tag">                    @<span class="attr">click</span>=<span class="string">&quot;lieconfig&quot;</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">style</span>=<span class="string">&quot;font-size: 25px; color: DodgerBlue&quot;</span></span></span><br><span class="line"><span class="tag">                  &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!-- 表格部分 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tableT&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span>//表格数据</span></span><br><span class="line"><span class="tag">          @<span class="attr">select</span>=<span class="string">&quot;danxuan&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">select-all</span>=<span class="string">&quot;quanxuan&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:border</span>=<span class="string">&quot;tableConfig.border&quot;</span>//表格边框</span></span><br><span class="line"><span class="tag">          <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:default-sort</span>=<span class="string">&quot;&#123; prop: &#x27;id&#x27;, order: &#x27;descending&#x27; &#125;&quot;</span>//表格默认排列方式</span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!--表格中的多行选择框--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-if</span>=<span class="string">&quot;tableConfig.selection&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">width</span>=<span class="string">&quot;55&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fixed</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-if</span>=<span class="string">&quot;tableConfig.index&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">label</span>=<span class="string">&quot;序号&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">width</span>=<span class="string">&quot;50&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment">&lt;!--表格中的图像类型--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in selecttable&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-if</span>=<span class="string">&quot;item.prop == &#x27;avatar&#x27; || item.prop == &#x27;preimg&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:prop</span>=<span class="string">&quot;item.prop&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:width</span>=<span class="string">&quot;item.width&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;scope.row[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:src</span>=<span class="string">&quot;scope.row[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">min-width</span>=<span class="string">&quot;70&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">height</span>=<span class="string">&quot;70&quot;</span></span></span><br><span class="line"><span class="tag">              /&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-tag</span> <span class="attr">v-else</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">disable-transitions</span>&gt;</span>无图片<span class="tag">&lt;/<span class="name">el-tag</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in selecttable&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-if</span>=<span class="string">&quot;item.prop !== &#x27;avatar&#x27; &amp;&amp; item.prop !== &#x27;preimg&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:prop</span>=<span class="string">&quot;item.prop&quot;</span>//表格值</span></span><br><span class="line"><span class="tag">            <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span>//表格名</span></span><br><span class="line"><span class="tag">            <span class="attr">:width</span>=<span class="string">&quot;item.width&quot;</span>//表格宽度</span></span><br><span class="line"><span class="tag">            <span class="attr">:show-overflow-tooltip</span>=<span class="string">&quot;true&quot;</span>//是否展示文字提示</span></span><br><span class="line"><span class="tag">            <span class="attr">:formatter</span>=<span class="string">&quot;item.formatter || undefined&quot;</span>//表格格式化</span></span><br><span class="line"><span class="tag">            <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:sortable</span>=<span class="string">&quot;issortable&quot;</span>//是否可排序</span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment">&lt;!--表格内最右边操作列--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-table-column</span></span></span><br><span class="line"><span class="tag">            <span class="attr">v-if</span>=<span class="string">&quot;tableConfig.handle&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">fixed</span>=<span class="string">&quot;right&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">label</span>=<span class="string">&quot;操作&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">align</span>=<span class="string">&quot;center&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:min-width</span>=<span class="string">&quot;210&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;scope&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--操作列内的按钮部分--&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-button</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in tableConfig.buttonAffairs&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">                @<span class="attr">click</span>=<span class="string">&quot;handleClick(item.affairs, scope.row)&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:type</span>=<span class="string">&quot;item.type&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span>&#123;&#123; item.name &#125;&#125;&lt;/el-button</span><br><span class="line">              &gt;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="comment">&lt;!-- 分页 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;block&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">          <span class="attr">v-if</span>=<span class="string">&quot;tableConfig.pagin&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">size-change</span>=<span class="string">&quot;handleSizeChange&quot;</span></span></span><br><span class="line"><span class="tag">          @<span class="attr">current-change</span>=<span class="string">&quot;handleCurrentChange&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:current-page</span>=<span class="string">&quot;page.page&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:page-sizes</span>=<span class="string">&quot;[5, 10, 50, 100]&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:page-size</span>=<span class="string">&quot;page.pageSize&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">layout</span>=<span class="string">&quot;total, sizes, prev, pager, next, jumper&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">:total</span>=<span class="string">&quot;tabletotal&quot;</span></span></span><br><span class="line"><span class="tag">        &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;TableContainer&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">TopBtu</span>: <span class="title class_">Array</span>,<span class="comment">//顶部按钮接收值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">searchK</span>: <span class="title class_">Array</span>,<span class="comment">//搜索框接收值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tableProp</span>: <span class="title class_">Array</span>,<span class="comment">//表格字段接收值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tableData</span>: <span class="title class_">Array</span>, <span class="comment">//表格内显示的数据</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tabletotal</span>: <span class="number">0</span>,<span class="comment">//表格内数量接收值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//分页对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">page</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">page</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">pageSize</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">tableConfig</span>: &#123;<span class="comment">//表格配置</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">type</span>: <span class="title class_">Object</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">default</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pagin</span>: <span class="literal">true</span>, <span class="comment">//是否分页</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">selection</span>: <span class="literal">true</span>, <span class="comment">// 选择框</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">index</span>: <span class="literal">true</span>, <span class="comment">// 序号</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">border</span>: <span class="literal">true</span>, <span class="comment">// 边框</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">handle</span>: <span class="literal">true</span>, <span class="comment">// 是否显示操作列</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">buttonAffairs</span>: [</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//操作列内按钮</span></span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">name</span>: <span class="string">&quot;编辑&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&quot;el-icon-plus&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;primary&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">affairs</span>: <span class="string">&quot;Edit&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">name</span>: <span class="string">&quot;删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&quot;el-icon-delete&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;danger&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">affairs</span>: <span class="string">&quot;Remove&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">lieconfigshow</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">issortable</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">visible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">checkAll</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">isIndeterminate</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">selecttable</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//表单对象</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">searchform</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//批量删除数组</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">batchdel</span>: [],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">cast</span>(<span class="params">val</span>) &#123;    <span class="comment">//顶部按钮抛出事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (val === <span class="string">&quot;Remove&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$emit(<span class="string">&quot;simTop&quot;</span> + val, <span class="variable language_">this</span>.<span class="property">batchdel</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;simTop&quot;</span> + val);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//列配置</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">lieconfig</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">lieconfigshow</span> = !<span class="variable language_">this</span>.<span class="property">lieconfigshow</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCheckAllChange</span>(<span class="params">val</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">selecttable</span> = val ? <span class="variable language_">this</span>.<span class="property">tableProp</span> : [];</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">isIndeterminate</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCheckedChange</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">let</span> checkedCount = value.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">checkAll</span> = checkedCount === <span class="variable language_">this</span>.<span class="property">tableProp</span>.<span class="property">length</span>; <span class="comment">//选中长度等于总长度时全选按钮为true</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">isIndeterminate</span> =</span></span><br><span class="line"><span class="language-javascript">        checkedCount &gt; <span class="number">0</span> &amp;&amp; checkedCount &lt; <span class="variable language_">this</span>.<span class="property">tableProp</span>.<span class="property">length</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    </span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">reset</span>(<span class="params"></span>) &#123;<span class="comment">//列配置内设置的重置按钮</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">tableProp</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="property">propsData</span>.<span class="property">tableProp</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">selecttable</span> = <span class="variable language_">this</span>.<span class="property">tableProp</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">isIndeterminate</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">checkAll</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">mainreset</span>(<span class="params"></span>) &#123;<span class="comment">//重置按钮抛出事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">searchform</span> = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;reset&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">submitForm</span>(<span class="params">searchform</span>) &#123;  <span class="comment">//查询抛出事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;selCX&quot;</span>, searchform);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">resetForm</span>(<span class="params">searchform</span>) &#123;<span class="comment">//重置按钮抛出事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">searchform</span> = &#123;&#125;;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;reset&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleClick</span>(<span class="params">affairs, row</span>) &#123;<span class="comment">//表格内操作列抛出事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;sim&quot;</span> + affairs, row);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">danxuan</span>(<span class="params">selection</span>) &#123;<span class="comment">//表格多选</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">batchdel</span> = selection;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">quanxuan</span>(<span class="params">selection</span>) &#123;<span class="comment">//表格多选</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">batchdel</span> = selection;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleSizeChange</span>(<span class="params">val</span>) &#123;<span class="comment">//分页每页大小改变操作事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">page</span>.<span class="property">pageSize</span> = val;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;getlist&quot;</span>, <span class="variable language_">this</span>.<span class="property">page</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleCurrentChange</span>(<span class="params">val</span>) &#123;<span class="comment">//分页当前页改变操作事件</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">page</span>.<span class="property">page</span> = val;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;getlist&quot;</span>, <span class="variable language_">this</span>.<span class="property">page</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.searchinput</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.el-table</span> <span class="selector-tag">thead</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.block</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: right;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.可复用的子组件弹窗TableDialog</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:title</span>=<span class="string">&quot;title&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogVisible&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:close-on-click-modal</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">append-to-body</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">&quot;45%&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">close</span>=<span class="string">&quot;handleClose&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;dataform&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;popform&quot;</span> <span class="attr">:inline</span>=<span class="string">&quot;true&quot;</span> <span class="attr">size</span>=<span class="string">&quot;medium&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dataform&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">el-form-item</span></span></span><br><span class="line"><span class="tag">              <span class="attr">v-for</span>=<span class="string">&quot;(item, index) in PopupViewinput&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">:label</span>=<span class="string">&quot;item.name&quot;</span>//表单字段名</span></span><br><span class="line"><span class="tag">              <span class="attr">:label-width</span>=<span class="string">&quot;item.width&quot;</span>//表单宽度</span></span><br><span class="line"><span class="tag">              <span class="attr">:prop</span>=<span class="string">&quot;item.prop&quot;</span>//表单字段值</span></span><br><span class="line"><span class="tag">              <span class="attr">style</span>=<span class="string">&quot;text-align: center&quot;</span></span></span><br><span class="line"><span class="tag">            &gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- Input输入框 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-input</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;</span></span></span><br><span class="line"><span class="string"><span class="tag">                  item.type === &#x27;number&#x27; ||</span></span></span><br><span class="line"><span class="string"><span class="tag">                  item.type === &#x27;text&#x27; ||</span></span></span><br><span class="line"><span class="string"><span class="tag">                  item.type === &#x27;textarea&#x27;</span></span></span><br><span class="line"><span class="string"><span class="tag">                &quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:type</span>=<span class="string">&quot;item.type&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">clearable</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:placeholder</span>=<span class="string">&quot;&#x27;请输入&#x27; + item.name&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:disabled</span>=<span class="string">&quot;item.disabled&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;dataform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- Select选择器 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-select</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;select&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:placeholder</span>=<span class="string">&quot;&#x27;请输入&#x27; + item.name&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;dataform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">el-option</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-for</span>=<span class="string">&quot;item in options&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:key</span>=<span class="string">&quot;item.value&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:label</span>=<span class="string">&quot;item.label&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:value</span>=<span class="string">&quot;item.value&quot;</span></span></span><br><span class="line"><span class="tag">                &gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">el-option</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-select</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- Switch开关 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-switch</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;switch&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;dataform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">active-color</span>=<span class="string">&quot;#13ce66&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">inactive-color</span>=<span class="string">&quot;#ff4949&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:active-text</span>=<span class="string">&quot;item.switch.text.right&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:inactive-text</span>=<span class="string">&quot;item.switch.text.left&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:active-value</span>=<span class="string">&quot;item.switch.value.right&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:inactive-value</span>=<span class="string">&quot;item.switch.value.left&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-switch</span>&gt;</span></span><br><span class="line">              <span class="comment">&lt;!-- 日期选择器 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-date-picker</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-model</span>=<span class="string">&quot;dataform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;datetime&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">placeholder</span>=<span class="string">&quot;选择日期时间&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">value-format</span>=<span class="string">&quot;timestamp&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span><br><span class="line"></span><br><span class="line">              <span class="comment">&lt;!-- 图片上传 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;img&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">ref</span>=<span class="string">&quot;upload&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">action</span>=<span class="string">&quot;#&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">accept</span>=<span class="string">&quot;.jpg,.jpeg,.png,.gif,.bmp,.JPG,.JPEG,.GIF,.BMP&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:class</span>=<span class="string">&quot;&#123; disabled: uploadDisabled &#125;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:limit</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">list-type</span>=<span class="string">&quot;picture-card&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:on-change</span>=<span class="string">&quot;handleChange&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:on-remove</span>=<span class="string">&quot;handleRemove&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot;width: 148px; height: 148px&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">v-if</span>=<span class="string">&quot;dataform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">:src</span>=<span class="string">&quot;dataform[item.prop]&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">class</span>=<span class="string">&quot;avatar&quot;</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- &lt;i v-else class=&quot;el-icon-plus avatar-uploader-icon&quot;&gt;&lt;/i&gt; --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"></span><br><span class="line">              <span class="comment">&lt;!-- 多张图片上传 --&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">                <span class="attr">v-if</span>=<span class="string">&quot;item.type === &#x27;imgList&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">action</span>=<span class="string">&quot;#&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">ref</span>=<span class="string">&quot;uploadList&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">list-type</span>=<span class="string">&quot;picture-card&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">:on-change</span>=<span class="string">&quot;uploadImg&quot;</span></span></span><br><span class="line"><span class="tag">              &gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- 底部按钮--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;info&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;dialogVisible = false&quot;</span></span></span><br><span class="line"><span class="tag">          &gt;</span>取 消&lt;/el-button</span><br><span class="line">        &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">size</span>=<span class="string">&quot;small&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;TableDialog&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">uploadDisabled</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">val</span>: <span class="title class_">Number</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">title</span>: <span class="string">&quot;&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dialogVisible</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">dataform</span>: &#123;&#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">PopupViewinput</span>: <span class="title class_">Array</span>,<span class="comment">//表单内接收值</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">open</span>(<span class="params">val, title, data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (val === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (data != <span class="literal">null</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">dataform</span> = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, data); <span class="comment">//浅拷贝防止表格跟随弹窗变化</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">val</span> = val;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">title</span> = title;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dialogVisible</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//提交</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">submit</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">val</span> === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$emit(<span class="string">&quot;submitAdd&quot;</span>, <span class="variable language_">this</span>.<span class="property">dataform</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">val</span> === <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$emit(<span class="string">&quot;submitUpdate&quot;</span>, <span class="variable language_">this</span>.<span class="property">dataform</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dialogVisible</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleClose</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">dataform</span> = <span class="variable language_">this</span>.<span class="property">$options</span>.<span class="title function_">data</span>().<span class="property">dataform</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">upload</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">upload</span>[<span class="number">0</span>].<span class="title function_">clearFiles</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">uploadList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">uploadList</span>[<span class="number">0</span>].<span class="title function_">clearFiles</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">uploadDisabled</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleChange</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;img&quot;</span>, file);</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">uploadDisabled</span> = <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleRemove</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">upload</span>[<span class="number">0</span>].<span class="title function_">clearFiles</span>();</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">uploadDisabled</span> = <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">uploadImg</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$emit(<span class="string">&quot;imgList&quot;</span>, file);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>  &gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.disabled</span> <span class="selector-class">.el-upload--picture-card</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.dataform</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">flex-wrap</span>: wrap;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">justify-content</span>: space-between;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.avatar-uploader</span> <span class="selector-class">.el-upload</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#d9d9d9</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-radius</span>: <span class="number">6px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">overflow</span>: hidden;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.avatar-uploader</span> <span class="selector-class">.el-upload</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">border-color</span>: <span class="number">#409eff</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.avatar-uploader-icon</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">font-size</span>: <span class="number">28px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: <span class="number">#8c939d</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">150px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">line-height</span>: <span class="number">178px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.avatar</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3.UserCon父组件引用实例</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TableContainer</span>  //引入子组件<span class="attr">TableContainer</span>主界面传输和接收值</span></span><br><span class="line"><span class="tag">      <span class="attr">v-bind</span>=<span class="string">&quot;da&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">selCX</span>=<span class="string">&quot;load&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">reset</span>=<span class="string">&quot;reset&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">getlist</span>=<span class="string">&quot;load&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">simTopAdd</span>=<span class="string">&quot;addClick&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">simTopRemove</span>=<span class="string">&quot;deleteClick&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">simEdit</span>=<span class="string">&quot;editClick&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">simRemove</span>=<span class="string">&quot;deleteOneClick&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">TableDialog</span>    //引入子组件<span class="attr">TableDialog</span>弹窗传输和接收值</span></span><br><span class="line"><span class="tag">      <span class="attr">ref</span>=<span class="string">&quot;dia&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-bind</span>=<span class="string">&quot;da1&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">img</span>=<span class="string">&quot;addimg&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">submitAdd</span>=<span class="string">&quot;submitAdd&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">submitUpdate</span>=<span class="string">&quot;submitUpdate&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">TableContainer</span> <span class="keyword">from</span> <span class="string">&quot;@/components/table/TableContainer.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">TableDialog</span> <span class="keyword">from</span> <span class="string">&quot;@/components/table/TableDialog.vue&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; selectUser, addUser, updateUser, deleteUser &#125; <span class="keyword">from</span> <span class="string">&quot;@/api/user.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> &#123; upload &#125; <span class="keyword">from</span> <span class="string">&quot;@/api/upload.js&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">name</span>: <span class="string">&quot;UserCon&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">TableContainer</span>,</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">TableDialog</span>,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//传给主界面TableContainer的值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">da</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">page</span>: &#123;<span class="comment">//页数</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">current</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pageSize</span>: <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">TopBtu</span>: [<span class="comment">//顶部按钮</span></span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;primary&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">label</span>: <span class="string">&quot;新建&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">icon</span>: <span class="string">&quot;el-icon-circle-plus&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">incident</span>: <span class="string">&quot;Add&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;danger&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">label</span>: <span class="string">&quot;删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">icon</span>: <span class="string">&quot;el-icon-delete-solid&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">incident</span>: <span class="string">&quot;Remove&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">searchK</span>: [<span class="comment">//顶部搜索框部分</span></span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">label</span>: <span class="string">&quot;账号&quot;</span>, <span class="attr">prop</span>: <span class="string">&quot;account&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">label</span>: <span class="string">&quot;邮箱&quot;</span>, <span class="attr">prop</span>: <span class="string">&quot;email&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">label</span>: <span class="string">&quot;手机号&quot;</span>, <span class="attr">prop</span>: <span class="string">&quot;mobilePhoneNumber&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>, <span class="attr">label</span>: <span class="string">&quot;昵称&quot;</span>, <span class="attr">prop</span>: <span class="string">&quot;nickname&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableProp</span>: [<span class="comment">//表格部分</span></span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;avatar&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;用户头像&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;150&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;id&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;用户id&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;200&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;account&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;账户&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;100&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;age&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;年龄&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;100&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;area&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;地区&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;150&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;admin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;管理员&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,<span class="comment">//格式化</span></span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;v&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;V认证&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;createDate&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;注册时间&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;200&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;deleted&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;可删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;nickname&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;昵称&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;100&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;email&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;邮箱&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;200&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;hobby&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;兴趣爱好&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;150&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;lastLogin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;最后登录时间&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;200&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;mobilePhoneNumber&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;电话号码&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;200&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;design&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;个性签名&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;250&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;password&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;密码&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;200&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;sex&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;性别&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;status&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;状态&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">formatter</span>: <span class="variable language_">this</span>.<span class="property">formatter</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;work&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;职业&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;150&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableData</span>: [],<span class="comment">//表格数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tabletotal</span>: <span class="number">0</span>,<span class="comment">//数据数量</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">tableConfig</span>: &#123;<span class="comment">//表格配置</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">pagin</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">selection</span>: <span class="literal">true</span>, <span class="comment">// 选择框</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">index</span>: <span class="literal">true</span>, <span class="comment">// 序号</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">border</span>: <span class="literal">true</span>, <span class="comment">// 边框</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">handle</span>: <span class="literal">true</span>, <span class="comment">// 是否显示操作列</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">buttonAffairs</span>: [<span class="comment">//操作列按钮</span></span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">name</span>: <span class="string">&quot;编辑&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&quot;el-icon-plus&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;primary&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">affairs</span>: <span class="string">&quot;Edit&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">name</span>: <span class="string">&quot;删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">icon</span>: <span class="string">&quot;el-icon-delete&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;danger&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">affairs</span>: <span class="string">&quot;Remove&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          ],</span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//传给弹窗页TableDialog的值</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">da1</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title class_">PopupViewinput</span>: [<span class="comment">//表单部分</span></span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;avatar&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;头像&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;img&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;id&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;用户id&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">disabled</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;account&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;账户&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;age&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;年龄&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;createDate&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;注册时间&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;datetime&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;admin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;管理员&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;switch&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">switch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">text</span>: &#123; <span class="attr">left</span>: <span class="string">&quot;否&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;是&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">value</span>: &#123; <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">right</span>: <span class="number">1</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;lastLogin&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;最后登录时间&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;100px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;datetime&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;deleted&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;可删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;switch&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">switch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">text</span>: &#123; <span class="attr">left</span>: <span class="string">&quot;否&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;是&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">value</span>: &#123; <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">right</span>: <span class="number">1</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;design&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;个性签名&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;v&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;v认证&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;switch&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">switch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">text</span>: &#123; <span class="attr">left</span>: <span class="string">&quot;未完成&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;已完成&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">value</span>: &#123; <span class="attr">left</span>: <span class="number">1</span>, <span class="attr">right</span>: <span class="number">3</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;email&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;邮箱&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;sex&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;性别&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;switch&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">switch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">text</span>: &#123; <span class="attr">left</span>: <span class="string">&quot;女&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;男&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">value</span>: &#123; <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">right</span>: <span class="number">1</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;hobby&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;兴趣爱好&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;area&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;地区&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;mobilePhoneNumber&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;电话号码&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;text&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;nickname&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;昵称&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;password&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;密码&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">          &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">prop</span>: <span class="string">&quot;status&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&quot;状态&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;switch&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">switch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">text</span>: &#123; <span class="attr">left</span>: <span class="string">&quot;离线&quot;</span>, <span class="attr">right</span>: <span class="string">&quot;在线&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">value</span>: &#123; <span class="attr">left</span>: <span class="number">0</span>, <span class="attr">right</span>: <span class="number">1</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#125;,</span></span><br><span class="line"><span class="language-javascript">          &#123; <span class="attr">prop</span>: <span class="string">&quot;work&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;职业&quot;</span>, <span class="attr">width</span>: <span class="string">&quot;80px&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;text&quot;</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">        ],</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">this</span>.<span class="title function_">load</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">formatter</span>(<span class="params">row, column, cellValue, index</span>) &#123;<span class="comment">//格式化</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (column.<span class="property">property</span> == <span class="string">&quot;admin&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> cellValue === <span class="number">1</span> ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (column.<span class="property">property</span> == <span class="string">&quot;deleted&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> cellValue === <span class="number">1</span> ? <span class="string">&quot;是&quot;</span> : <span class="string">&quot;否&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (column.<span class="property">property</span> == <span class="string">&quot;v&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">switch</span> (cellValue) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">1</span>:</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="string">&quot;未认证&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">2</span>:</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="string">&quot;进行中&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">case</span> <span class="number">3</span>:</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">return</span> <span class="string">&quot;已认证&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (column.<span class="property">property</span> == <span class="string">&quot;sex&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> cellValue === <span class="number">1</span> ? <span class="string">&quot;男&quot;</span> : <span class="string">&quot;女&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (column.<span class="property">property</span> == <span class="string">&quot;status&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> cellValue === <span class="number">1</span> ? <span class="string">&quot;在线&quot;</span> : <span class="string">&quot;离线&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (column.<span class="property">property</span> == <span class="string">&quot;createDate&quot;</span> || <span class="string">&quot;lastLogin&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>(cellValue);</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> y = date.<span class="title function_">getFullYear</span>();</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> <span class="variable constant_">MM</span> = date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable constant_">MM</span> = <span class="variable constant_">MM</span> &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + <span class="variable constant_">MM</span> : <span class="variable constant_">MM</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> d = date.<span class="title function_">getDate</span>();</span></span><br><span class="line"><span class="language-javascript">        d = d &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + d : d;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> h = date.<span class="title function_">getHours</span>();</span></span><br><span class="line"><span class="language-javascript">        h = h &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + h : h;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> m = date.<span class="title function_">getMinutes</span>();</span></span><br><span class="line"><span class="language-javascript">        m = m &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + m : m;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> s = date.<span class="title function_">getSeconds</span>();</span></span><br><span class="line"><span class="language-javascript">        s = s &lt; <span class="number">10</span> ? <span class="string">&quot;0&quot;</span> + s : s;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> y + <span class="string">&quot;-&quot;</span> + <span class="variable constant_">MM</span> + <span class="string">&quot;-&quot;</span> + d + <span class="string">&quot; &quot;</span> + h + <span class="string">&quot;:&quot;</span> + m + <span class="string">&quot;:&quot;</span> + s;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">load</span>(<span class="params">searchform</span>) &#123;<span class="comment">//加载</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">selectUser</span>(searchform)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">da</span>.<span class="property">tableData</span> = res.<span class="property">data</span>.<span class="property">records</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">da</span>.<span class="property">tabletotal</span> = res.<span class="property">data</span>.<span class="property">total</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">da</span>.<span class="property">page</span>.<span class="property">current</span> = res.<span class="property">data</span>.<span class="property">current</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="property">da</span>.<span class="property">page</span>.<span class="property">pageSize</span> = res.<span class="property">data</span>.<span class="property">size</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">reset</span>(<span class="params"></span>) &#123;<span class="comment">//重置</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="title function_">load</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">addClick</span>(<span class="params"></span>) &#123;<span class="comment">//新增</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">dia</span>.<span class="title function_">open</span>(<span class="number">0</span>, <span class="string">&quot;新增用户&quot;</span>, &#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">editClick</span>(<span class="params">row</span>) &#123;<span class="comment">//编辑</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">dia</span>.<span class="title function_">open</span>(<span class="number">1</span>, <span class="string">&quot;编辑用户&quot;</span>, row);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">submitAdd</span>(<span class="params">data</span>) &#123;<span class="comment">//提交</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">addUser</span>(data)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (res.<span class="property">success</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&quot;添加用户成功&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&quot;添加用户失败&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">submitUpdate</span>(<span class="params">data</span>) &#123;<span class="comment">//更新</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">updateUser</span>(data)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (res.<span class="property">success</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&quot;更新用户成功&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&quot;更新用户失败&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">deleteClick</span>(<span class="params">data</span>) &#123;<span class="comment">//顶部按钮删除多个</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (data.<span class="property">length</span> === <span class="number">0</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">message</span>: <span class="string">&quot;请选择要删除的用户&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$confirm(<span class="string">&quot;此操作将永久删除该用户, 是否继续?&quot;</span>, <span class="string">&quot;提示&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">confirmButtonText</span>: <span class="string">&quot;确定&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">cancelButtonText</span>: <span class="string">&quot;取消&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            data.<span class="title function_">forEach</span>(<span class="function">(<span class="params">element</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="title function_">deleteUser</span>(element.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;&#125;)</span></span><br><span class="line"><span class="language-javascript">                .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="title function_">load</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;info&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&quot;已取消删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">deleteOneClick</span>(<span class="params">data</span>) &#123;<span class="comment">//操作列按钮删除单个</span></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$confirm(<span class="string">&quot;此操作将永久删除该用户, 是否继续?&quot;</span>, <span class="string">&quot;提示&quot;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">confirmButtonText</span>: <span class="string">&quot;确定&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">cancelButtonText</span>: <span class="string">&quot;取消&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">deleteUser</span>(data.<span class="property">id</span>)</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span> (res.<span class="property">success</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">message</span>: <span class="string">&quot;删除用户成功&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">              &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">message</span>: <span class="string">&quot;删除用户失败&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                  <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                &#125;);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">            .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.<span class="title function_">load</span>(&#123;&#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">        .<span class="title function_">catch</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>: <span class="string">&quot;info&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">message</span>: <span class="string">&quot;已取消删除&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">addimg</span>(<span class="params">data</span>) &#123;<span class="comment">//图片上传</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//上传头像前接收的数据</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> isIMAGE = data.<span class="property">raw</span>.<span class="property">type</span> === <span class="string">&quot;image/jpeg&quot;</span> || <span class="string">&quot;image/gif&quot;</span> || <span class="string">&quot;image/png&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> isLt2M = data.<span class="property">raw</span>.<span class="property">size</span> / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">2</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!isIMAGE) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">message</span>: <span class="string">&quot;请上传正确的图片格式&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isLt2M) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">message</span>: <span class="string">&quot;上传文件大小不能超过 2MB!&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">let</span> formdata = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span></span><br><span class="line"><span class="language-javascript">        formdata.<span class="title function_">append</span>(<span class="string">&quot;image&quot;</span>, data.<span class="property">raw</span>);</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">upload</span>(formdata)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">dia</span>.<span class="property">dataform</span>.<span class="property">avatar</span> = res.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">da1</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">this</span>.$message(&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">showClose</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">message</span>: <span class="string">&quot;头像上传成功&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">          .<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;b&gt;一、element ui二次封装的优缺点&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;优点：组件复用性高，利于后期维护。在封装好后能极大提高开发效率，适合用于后台管理系统、页面繁多或具有多个及其相似的页面工厂系统里。&lt;/p&gt;
&lt;p&gt;缺点：封装过程较难，封装后的页面较为单一，如不写注释代码可</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue概念</title>
    <link href="http://example.com/2019/02/19/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%94%E7%AF%87/"/>
    <id>http://example.com/2019/02/19/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%94%E7%AF%87/</id>
    <published>2019-02-19T09:05:13.000Z</published>
    <updated>2022-08-05T01:00:24.485Z</updated>
    
    <content type="html"><![CDATA[<p>vue是什么？</p><p>vue一套用于构建用户界面的渐进式javascript框架</p><p>vue是谁开发的？</p><p>尤玉溪</p><p>vue的特点</p><p>1.采用组件化模式，提高代码复用率且让代码更好维护</p><p>2.声明式代码，让编码人员无需直接操作DOM，提高开发效率</p><p>3.使用虚拟DOM+优秀的diff算法，尽量复用DOM节点。</p><p>学习vue之前要掌握的javascript基础知识？</p><p>es6语法规范，ES6模块化，包管理器，原型，原型链，数组常用方法，axios,promise ……</p><p>vue网址</p><p>Vue.js</p><p>Creating a Project | Vue CLI</p><p>下载</p><p>安装 — Vue.js</p><p>添加vue扩展组件（找到的）</p><p>在谷歌Chrome浏览器中添加vue.js扩展组件_橙之殇的博客-CSDN博客_chrome vue 扩展</p><p>百度网盘 请输入提取码 提取码为6gct</p><p>关闭提示</p> <script type="text/javascript">      vue.config.productionTip=false //阻止vue在启动时生产提示    </script><p>el用于指定当前vue实例为哪个容器服务，值通常为CSS选择器字符串</p><p>data用于存储数据，数据供el指定容器去使用，值我们暂时写成一个对象。</p><p>vue模板语法：分为两种1.插值语法2.指令语法</p><p>1.插值语法：功能用于解析标签体内容</p><p>写法：，xxx是js表达式，且可以直接读到data中的所有属性</p><p>2.指令语法：功能用于解析标签（包括：标签属性，标签体内容，绑定事件……）。</p><p>举例:v-bind:href=”xxx”或简写为：href=“xxx”，xxx同样要写js表达式。</p><p>备注：vue中有很多指令且形势都是v-????。</p><p>vue中有两种数据绑定的方式</p><p>1.单向绑定（v-bind）：数据只能从data流向页面</p><p>2.双向绑定（v-model）：数据不仅能从data流向页面，还可以从页面流向data。</p><p>备注：1.双向绑定一般都应在表单类元素上（如：input，select等）</p><p>2.v-model：value可以简写为v-model，因为v-model默认收集的就是value值</p><p>el和data的两种写法</p><p>el有两种写法</p><p>1.new vue时候配置el属性</p><p>2.先创建vue实例，随后再通过vm.$mount(‘#root’)指定el的值</p><p>data有两种写法1.对象式 2.函数式</p><p>如何选择：目前哪种写法都可以，以后学习到组件时，data必须使用函数式，否则就会报错</p><p>一个重要原则：由vue管理的函数。一定不要写箭头函数，一旦写了箭头函数，this就不再是vue实例了</p><p>el的两种写法</p><p>const v=new vue({</p><p>el:’root’,//第一种</p><p>data：{</p><p>name:’程程呀’</p><p>}</p><p>})</p><p>console.log(v)</p><p>v.$mount(‘#root’)//第二种</p><p>data的两种写法</p><p>new vue（{</p><p>el:’#root’</p><p>//data的第一种写法：对象式</p><p>data:{</p><p>name:’程程呀’</p><p>}</p><p>//data的第二种写法：函数式</p><p>data(){</p><p>console.log(‘@@@’,this)//此处this是vue实例对象</p><p>return{</p><p>name:’程程呀’</p><p>}</p><p>}</p><p>}）</p><p>MVVM模型</p><p>m:模型（model）：data中的数据</p><p>v:视图（view）：模板代码</p><p>vm：视图模型（viewmodel）：vue实例</p><p>观察发现：1.data中所有属性，最后都出现在vm身上</p><p>2.vm身上所有的属性及vue原型上所有属性，在vue模板中都可以直接使用</p><p>事件的基本使用：</p><p>1.使用v-on：xxx或者@xxx绑定事件，其中xxx是事件名</p><p>2.事件的回调需要配置methods对象中，最终会在vm上</p><p>3.methods中配置的函数，不需要箭头函数！否则this就不是vm了</p><p>4.methods中配置的函数，都是被vm所管理的函数，this指向是vm或者组件实例对象</p><p>5.@click=“demo”和@click=“demo（$event）”效果一致。但后者可以传参</p><p>vue中的事件修饰符：</p><p>1.prevent：阻止默认事件（常用）</p><p>2.stop：阻止事件冒泡（常用）</p><p>3.once：事件只触发一次（常用）</p><p>4.capture：使用事件的捕获模式：</p><p>5.self：只有event，target是当前操作的元素是才触发事件</p><p>6.passive：事件的默认行为当即执行，无需等待时间回调执行完毕；</p><p>vue中常用的按键别名</p><p>回车=&gt;enter</p><p>删除=&gt;delete（捕获“删除”和“退格”键）</p><p>退出=&gt;esc</p><p>空格=&gt;space</p><p>换行=&gt;tab</p><p>上=&gt;up</p><p>下=&gt;down</p><p>左=&gt;left</p><p>右=&gt;right</p><p>2.vue未提供别名的按键，可以使用按键原始的key值去绑定，但注意要转为kebab-case（短横线命名）</p><p>3.系统修饰符（用法特殊）Ctrl，alt，shift，meta</p><p>3.1配合keyup使用：按下修饰符键的同时，再按下其他键，随后释放其他键，时间才被触发</p><p>3.2配合keydown使用：正常触发时间</p><p>4.也可以使用keycode去指定具体按键（不推荐）</p><p>5.vue，config,keycodes,自定义键名=键码， 可以去定制按键别名</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;vue是什么？&lt;/p&gt;
&lt;p&gt;vue一套用于构建用户界面的渐进式javascript框架&lt;/p&gt;
&lt;p&gt;vue是谁开发的？&lt;/p&gt;
&lt;p&gt;尤玉溪&lt;/p&gt;
&lt;p&gt;vue的特点&lt;/p&gt;
&lt;p&gt;1.采用组件化模式，提高代码复用率且让代码更好维护&lt;/p&gt;
&lt;p&gt;2.声明式代码，让编</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue中使用echarts实现动态数据绑定、获取后端接口数据</title>
    <link href="http://example.com/2019/02/15/%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AF%87/"/>
    <id>http://example.com/2019/02/15/%E7%AC%AC%E4%BA%8C%E5%8D%81%E5%9B%9B%E7%AF%87/</id>
    <published>2019-02-15T02:54:28.000Z</published>
    <updated>2022-08-05T00:58:15.548Z</updated>
    
    <content type="html"><![CDATA[<p>之前几篇echarts的文章是实现了静态的柱状图、折线图、饼状图、地图，在项目中我们肯定是需要获取后端接口，将后端返回的数据显示在图表上，所以这次就记录一下如何实现echarts的动态数据绑定。</p><p>简单来讲，就是从接口获取到的数据，需要在图表的方法里再次定义一下，然后用setOption方法就可以获取到了。</p><p>1.柱状图<br>首先看接口传过来的数据，传过来一个数组，第一条年度2021，数量1，第二条年度2022，数量3</p><img src="https://img-blog.csdnimg.cn/4bc7b381906e4aadbbe72405ce79f6db.png" class=""><p>因为柱状图的数据有两个，横坐标和纵坐标，所以我们将传来的数据，横坐标做一个数组，纵坐标做一个数组。</p><p>首先在data中定义</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lwData</span>: &#123;&#125;, <span class="comment">// 论文数据</span></span><br><span class="line"><span class="attr">lwndArr</span>: [], <span class="comment">// 年度数组</span></span><br><span class="line"><span class="attr">lwtsArr</span>: [], <span class="comment">// 论文发表天数数组</span></span><br></pre></td></tr></table></figure><p>接着获取接口数据，把接口数据处理一下放进两个数组里。年度为横坐标，将data中传来的年度循环放入年度数组。天数为纵坐标，将data中传来的天数循环放入天数数组。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">axios</span>.<span class="title function_">post</span>(<span class="variable language_">this</span>.<span class="property">counturl</span>, &#123;</span><br><span class="line">  <span class="attr">type</span>:<span class="string">&#x27;paper&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (res.<span class="property">result</span> === <span class="string">&#x27;00000&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">lwData</span> = res.<span class="property">data</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="variable language_">this</span>.<span class="property">lwData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lwndArr</span>[i] = <span class="variable language_">this</span>.<span class="property">lwData</span>[i].<span class="property">nd</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="variable language_">this</span>.<span class="property">lwData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">lwtsArr</span>[i] = <span class="variable language_">this</span>.<span class="property">lwData</span>[i].<span class="property">count</span></span><br><span class="line">    &#125;</span><br><span class="line">    lwndArr = <span class="variable language_">this</span>.<span class="property">lwndArr</span></span><br><span class="line">    lwtsArr = <span class="variable language_">this</span>.<span class="property">lwtsArr</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">$Message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">information</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>echarts和别的获取接口数据不一样的地方，在于echarts中需要再次定义一下数组，然后把接口获取到的数据放进去，不能直接引用this里的数据。</p><p>在获取echarts图表的方法里，定义横纵坐标的两个data，然后使用setOption方法，引用定义的data，就可以显示出接口里的数据了。（不再需要const option）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 论文发表天数柱状图</span></span><br><span class="line">getLwBar () &#123;</span><br><span class="line">  <span class="keyword">let</span> lwndArr = []</span><br><span class="line">  <span class="keyword">let</span> lwtsArr = []</span><br><span class="line">  <span class="keyword">const</span> lwBar = echarts.<span class="title function_">init</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;lwBar&#x27;</span>))<span class="comment">// 图标初始化</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">axios</span>.<span class="title function_">post</span>(<span class="variable language_">this</span>.<span class="property">counturl</span>, &#123;</span><br><span class="line">      <span class="attr">type</span>:<span class="string">&#x27;paper&#x27;</span></span><br><span class="line">    &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">result</span> === <span class="string">&#x27;00000&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">lwData</span> = res.<span class="property">data</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="variable language_">this</span>.<span class="property">lwData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">lwndArr</span>[i] = <span class="variable language_">this</span>.<span class="property">lwData</span>[i].<span class="property">nd</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> i=<span class="number">0</span>;i&lt;<span class="variable language_">this</span>.<span class="property">lwData</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">lwtsArr</span>[i] = <span class="variable language_">this</span>.<span class="property">lwData</span>[i].<span class="property">count</span></span><br><span class="line">        &#125;</span><br><span class="line">        lwndArr = <span class="variable language_">this</span>.<span class="property">lwndArr</span></span><br><span class="line">        lwtsArr = <span class="variable language_">this</span>.<span class="property">lwtsArr</span></span><br><span class="line">        lwBar.<span class="title function_">setOption</span>(&#123;</span><br><span class="line">          <span class="attr">title</span>: &#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;论文发表天数柱状图&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">tooltip</span>: &#123;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">legend</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: [<span class="string">&#x27;论文发表天数&#x27;</span>]</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">xAxis</span>:&#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;年份&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>:lwndArr</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">yAxis</span>:&#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;论文发表天数&#x27;</span>,</span><br><span class="line">            <span class="attr">type</span>:<span class="string">&#x27;value&#x27;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">series</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">name</span>: <span class="string">&#x27;论文发表天数&#x27;</span>,</span><br><span class="line">              <span class="attr">type</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="comment">// 类型为柱状图</span></span><br><span class="line">              <span class="attr">data</span>: lwtsArr,</span><br><span class="line">              <span class="attr">barWidth</span>: <span class="string">&#x27;20%&#x27;</span>, <span class="comment">// 柱条宽度 每个柱条的宽度就是类目宽度的 20%</span></span><br><span class="line">              <span class="comment">// 柱子的样式</span></span><br><span class="line">              <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">                <span class="attr">color</span>: <span class="string">&#x27;#5574c2&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">$Message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">information</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="comment">// 随着屏幕大小调节图表</span></span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        lwBar.<span class="title function_">resize</span>()</span><br><span class="line">      &#125;)</span><br><span class="line">   &#125;,</span><br></pre></td></tr></table></figure><img src="https://img-blog.csdnimg.cn/21cd926319b14b3aa6d6f7e85434cdf0.png" class="">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;之前几篇echarts的文章是实现了静态的柱状图、折线图、饼状图、地图，在项目中我们肯定是需要获取后端接口，将后端返回的数据显示在图表上，所以这次就记录一下如何实现echarts的动态数据绑定。&lt;/p&gt;
&lt;p&gt;简单来讲，就是从接口获取到的数据，需要在图表的方法里再次定义一下</summary>
      
    
    
    
    <category term="echarts" scheme="http://example.com/categories/echarts/"/>
    
    
    <category term="echarts" scheme="http://example.com/tags/echarts/"/>
    
  </entry>
  
  <entry>
    <title>【vue】Vue中的map()用法</title>
    <link href="http://example.com/2019/01/27/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%89%E7%AF%87/"/>
    <id>http://example.com/2019/01/27/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%89%E7%AF%87/</id>
    <published>2019-01-27T07:24:08.000Z</published>
    <updated>2022-08-05T00:53:44.428Z</updated>
    
    <content type="html"><![CDATA[<p><b>一、map()是什么？ </b><br>其实我也不清楚，会用就好啦。数组操作是前端最重要的数据操作，构造数组数据，重构解析数组又是数组操作中很常见的。下面我将写出我得心得和map()在Vue项目中的使用。<br><b>二、使用 </b><br>1.案例一：取给定数组的某一字段组成新数组<br>的后台传来的数据 data（json）:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[   <span class="comment">//data的数据</span></span><br><span class="line">&#123;<span class="string">&quot;txt&quot;</span>:<span class="string">&quot;09:00-12:00&quot;</span>,<span class="string">&quot;codId&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;flgDel&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="number">1</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;txt&quot;</span>:<span class="string">&quot;13:00-16:00&quot;</span>,<span class="string">&quot;codId&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;flgDel&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="number">2</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;txt&quot;</span>:<span class="string">&quot;18:00-20:00&quot;</span>,<span class="string">&quot;codId&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;flgDel&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>前台使用要为：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;09:00-12:00&#x27;</span>, <span class="string">&#x27;13:00-16:00&#x27;</span>, <span class="string">&#x27;18:00-20:00&#x27;</span>]</span><br></pre></td></tr></table></figure><p>用到map()只需一行（我同学想要用到for循环遍历出来）我就觉得很麻烦，只记得之前貌似用过map()。快捷方法出来了学去吧。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> time = data.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span>(item.<span class="property">txt</span>))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(time) </span><br><span class="line"><span class="comment">//控制台输出如下</span></span><br><span class="line"><span class="comment">//[&#x27;09:00-12:00&#x27;, &#x27;13:00-16:00&#x27;, &#x27;18:00-20:00&#x27;]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.案例二：取给定数组的某些字段重命名并组成新数组<br>新的接口传来data（json）：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[  <span class="comment">//新data数据</span></span><br><span class="line">&#123;<span class="string">&quot;txt&quot;</span>:<span class="string">&quot;拜访&quot;</span>,<span class="string">&quot;flgDel&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="number">1</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;txt&quot;</span>:<span class="string">&quot;面试&quot;</span>,<span class="string">&quot;flgDel&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="number">2</span>&#125;,</span><br><span class="line">&#123;<span class="string">&quot;txt&quot;</span>:<span class="string">&quot;其他&quot;</span>,<span class="string">&quot;flgDel&quot;</span>:<span class="string">&quot;0&quot;</span>,<span class="string">&quot;id&quot;</span>:<span class="number">3</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>当然，或许你要的这样⬇ :</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[&#123; <span class="attr">name</span>: <span class="string">&#x27;拜访&#x27;</span>,<span class="attr">id</span>:<span class="string">&#x27;1&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;面试&#x27;</span>,<span class="attr">id</span>:<span class="string">&#x27;2&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;其他&#x27;</span>,<span class="attr">id</span>:<span class="string">&#x27;3&#x27;</span>&#125;]</span><br><span class="line"><span class="comment">//要两个字段的数据</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> resion2 = data.<span class="title function_">map</span>(<span class="function"><span class="params">item</span> =&gt;</span>(&#123;<span class="attr">name</span>: item.<span class="property">txt</span>, <span class="attr">id</span>: item.<span class="property">id</span>&#125;))</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(resion2) </span><br><span class="line"><span class="comment">//控制台输出</span></span><br><span class="line"><span class="comment">//[&#123; name: &#x27;拜访&#x27;,id:&#x27;1&#x27; &#125;, &#123; name: &#x27;面试&#x27;,id:&#x27;2&#x27; &#125;, &#123; name: &#x27;其他&#x27;,id:&#x27;3&#x27;&#125;]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[&#123; <span class="attr">name</span>: <span class="string">&#x27;拜访1&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;面试2&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;其他3&#x27;</span>&#125;]</span><br><span class="line"><span class="comment">//要拼接的数据</span></span><br></pre></td></tr></table></figure><p><b>三、总结</b><br>方便太多了同学都来向我请教了,写的明白易懂吧相信也会用了(小白教程)。<br>以上就是今天要记录的内容，本文仅仅简单介绍了map()在vue中数据处理的一点皮毛，而map()提供了大量能使我们快速便捷地处理数据的函数和方法还等待我去使用发现</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;b&gt;一、map()是什么？ &lt;/b&gt;&lt;br&gt;其实我也不清楚，会用就好啦。数组操作是前端最重要的数据操作，构造数组数据，重构解析数组又是数组操作中很常见的。下面我将写出我得心得和map()在Vue项目中的使用。&lt;br&gt;&lt;b&gt;二、使用 &lt;/b&gt;&lt;br&gt;1.案例一：取给定数组的</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>uniapp开发，打包成H5部署到服务器</title>
    <link href="http://example.com/2019/01/17/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%8C%E7%AF%87/"/>
    <id>http://example.com/2019/01/17/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%BA%8C%E7%AF%87/</id>
    <published>2019-01-17T01:39:26.000Z</published>
    <updated>2022-08-05T00:47:21.968Z</updated>
    
    <content type="html"><![CDATA[<p>前端使用uniapp开发项目完成后，需要将页面打包，生成H5的静态文件，部署在服务器上。<br>这样通过服务器链接地址，直接可以在手机上点开来访问。</p><p>打包全步骤如下：<br>一、点击菜单栏“发行”，点击选择“网站-PC Web或手机H5”，</p><img src="https://img-blog.csdnimg.cn/52d69958cf46489898a139904c908ae5.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class=""><p>二、填写网站标题和网站域名/服务器的IP地址。<br>（这个地址是将项目打包之后存放静态文件的地址)</p><img src="https://img-blog.csdnimg.cn/3ae4ce6d45ee4503ac615e277e0fe151.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class=""><p>三、点击进入manifest.json的h5配置里，根据自己的情况配置一些信息。<br>一定要注意配置 “运行的基础路径”，如果出现空白页面或者静态文件404的情况，可能是因为这个路径没有配置好。</p><img src="https://img-blog.csdnimg.cn/9540f094de1b4eed83b2a1ccc0d1d600.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class=""><p>四、点击发行，控制台会自动编译。出现以下提示，说明编译成功：</p><img src="https://img-blog.csdnimg.cn/6a19fe7ff068481e897085db473178a9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class=""><img src="https://img-blog.csdnimg.cn/6a19fe7ff068481e897085db473178a9.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" class=""><p>五、点击上图中的红框部分，就能看到已经打包好的静态页面了。（直接把这个h5文件压缩一下，发给后端就可以了）</p><img src="https://img-blog.csdnimg.cn/e5e280543f374e85ab1b00411aa1e3af.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_12,color_FFFFFF,t_70,g_se,x_16#pic_center" class=""><p>如需要自己上传到服务器上，可继续以下步骤。<br>六、先拿到服务器的地址信息，找一个工具，连接上该项目的服务器，进入到服务器的根目录底下。<br>我这里用的是ftp工具。在根目录底下新建一个aofan文件夹，然后将上图中的static文件夹和index.html复制进去即可。<br>OK，这个时候就已经部署成功了。</p><p>七、打开浏览器，输入服务器ip地址，访问一下index.html的内容即可。</p><p>注意点：这三个地方的路径名称一定要一致。<br>1：打包时候的配置的运行的基础路径<br>2：服务器根目录底下存放静态文件static和index.html<br>3：浏览器里面访问的路径</p><img src="https://img-blog.csdnimg.cn/3f1ae6fec6c3429792827b6f26c01457.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA6ams5bCP6Lez5LyaQ29kaW5n,size_20,color_FFFFFF,t_70,g_se,x_16" class="">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;前端使用uniapp开发项目完成后，需要将页面打包，生成H5的静态文件，部署在服务器上。&lt;br&gt;这样通过服务器链接地址，直接可以在手机上点开来访问。&lt;/p&gt;
&lt;p&gt;打包全步骤如下：&lt;br&gt;一、点击菜单栏“发行”，点击选择“网站-PC Web或手机H5”，&lt;/p&gt;
&lt;img </summary>
      
    
    
    
    <category term="小程序" scheme="http://example.com/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
    
    <category term="小程序" scheme="http://example.com/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>vue 实现动态路由</title>
    <link href="http://example.com/2019/01/04/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AF%87/"/>
    <id>http://example.com/2019/01/04/%E7%AC%AC%E4%BA%8C%E5%8D%81%E4%B8%80%E7%AF%87/</id>
    <published>2019-01-04T08:19:06.000Z</published>
    <updated>2022-08-05T00:42:29.704Z</updated>
    
    <content type="html"><![CDATA[<p>1、什么是动态路由？<br>2、动态路由的好处<br>3、动态路由如何实现</p><p>1、什么是动态路由？</p><p>动态路由，动态即不是写死的，是可变的。我们可以根据自己不同的需求加载不同的路由，做到不同的实现及页面的渲染。动态的路由存储可分为两种，一种是将路由存储到前端。另一种则是将路由存储到数据库。动态路由的使用一般结合角色权限控制一起使用。<br>总结：</p><pre><code> 1）路由可变，不是写死的，动态加载 2）存储分两种：存前端，存数据库</code></pre><p>2、动态路由的好处</p><p>使用动态路由可以跟灵活，无需手工维护，我们可以使用一个页面对路由进行维护。如果将路由存储到数据库，还可以增加安全性。<br>总结：</p><pre><code> 1）灵活，无需手工维护 2）增加安全性</code></pre><p>3、动态路由如何实现</p><p>在此以路由存储在数据库为例<br>流程：一般我们在登录的时候，根据登录用户的角色返回此角色可以访问的页面的路由，前端将路由存储到vuex(vuex存储的数据必须可持久的，不要一刷新页面就不见),我们在路由前置守卫处动态添加拿到的路由，对页面进行渲染。</p><p>1）此为我的router目录，index.js对路由添加，守卫拦截等处理。static-route.js为前端定义的静态路由，不需要动态加载的，如登陆页面，忘记密码页面，404页面等。</p><img src="https://img-blog.csdnimg.cn/96a9b7d9e5b04b7492acecb3f98bae25.png" class=""><img src="https://img-blog.csdnimg.cn/bde180621e5444fdbdb6c6754e7ecd58.png" class=""><p>index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> $cookies <span class="keyword">from</span> <span class="string">&#x27;vue-cookies&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store&#x27;</span>​</span><br><span class="line"><span class="keyword">import</span> staticRoute <span class="keyword">from</span> <span class="string">&#x27;./static-route.js&#x27;</span>​​​</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)​​</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line"><span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line"><span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line"><span class="attr">routes</span>: staticRoute <span class="comment">//staticRoute为静态路由，不需动态添加</span></span><br><span class="line">&#125;)​</span><br><span class="line"><span class="keyword">let</span> isToken = <span class="literal">true</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">async</span> (to, <span class="keyword">from</span>, next) =&gt; &#123;</span><br><span class="line"><span class="comment">//定义isToken为true和vuex不为空时添加路由</span></span><br><span class="line"><span class="keyword">if</span> (isToken &amp;&amp; store.<span class="property">state</span>.<span class="property">routers</span>.<span class="property">routers</span>.<span class="property">length</span> != <span class="number">0</span>) &#123;</span><br><span class="line"><span class="comment">//从vuex中获取动态路由</span></span><br><span class="line"><span class="keyword">const</span> accessRouteses = <span class="keyword">await</span> store.<span class="property">state</span>.<span class="property">routers</span>.<span class="property">routers</span>;</span><br><span class="line"><span class="comment">//动态路由循环解析和添加</span></span><br><span class="line">accessRouteses.<span class="title function_">forEach</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">v.<span class="property">children</span> = <span class="title function_">routerChildren</span>(v.<span class="property">children</span>);</span><br><span class="line">v.<span class="property">component</span> = <span class="title function_">routerCom</span>(v.<span class="property">component</span>);</span><br><span class="line">router.<span class="title function_">addRoute</span>(v); <span class="comment">//添加</span></span><br><span class="line">&#125;)</span><br><span class="line">isToken = <span class="literal">false</span> <span class="comment">//将isToken赋为 false ，否则会一直循环，崩溃</span></span><br><span class="line"><span class="title function_">next</span>(&#123;</span><br><span class="line">...to, <span class="comment">// next(&#123; ...to &#125;)的目的,是保证路由添加完了再进入页面 (可以理解为重进一次)</span></span><br><span class="line"><span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">// 重进一次, 不保留重复历史</span></span><br><span class="line">&#125;)​</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (to.<span class="property">name</span> == <span class="literal">null</span>) &#123;</span><br><span class="line"><span class="title function_">next</span>(<span class="string">&quot;/404&quot;</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">title</span>) &#123; <span class="comment">//判断是否有标题</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> <span class="comment">//给相应页面添加标题</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">next</span>()</span><br><span class="line">&#125;​</span><br><span class="line">&#125;​</span><br><span class="line">&#125;)​</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">routerCom</span>(<span class="params">path</span>) &#123; <span class="comment">//对路由的component解析</span></span><br><span class="line"><span class="keyword">return</span> <span class="function">(<span class="params">resolve</span>) =&gt;</span> <span class="built_in">require</span>([<span class="string">`@/views/<span class="subst">$&#123;path&#125;</span>`</span>], resolve);</span><br><span class="line">&#125;​</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">routerChildren</span>(<span class="params">children</span>) &#123; <span class="comment">//对子路由的component解析</span></span><br><span class="line">children.<span class="title function_">forEach</span>(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">v.<span class="property">component</span> = <span class="title function_">routerCom</span>(v.<span class="property">component</span>);</span><br><span class="line"><span class="keyword">if</span> (v.<span class="property">children</span> != <span class="literal">undefined</span>) &#123;</span><br><span class="line">v.<span class="property">children</span> = <span class="title function_">routerChildren</span>(v.<span class="property">children</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">return</span> children</span><br><span class="line">&#125;​​</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router​</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2）登陆成功后将获取到的动态路由存储到vuex</p><img src="https://img-blog.csdnimg.cn/8f7ade62301245389eb03921f349d268.png" class=""><p>vuex—&gt;index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//数据持久化</span></span><br><span class="line"><span class="keyword">import</span> createPersistedState <span class="keyword">from</span> <span class="string">&quot;vuex-persistedstate&quot;</span>;</span><br><span class="line">​</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"><span class="keyword">const</span> routers = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">state</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">routers</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">routers</span>(<span class="params">state, newsdata</span>) &#123;</span><br><span class="line">      state.<span class="property">routers</span> = newsdata</span><br><span class="line">    &#125;,</span><br><span class="line">​</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="title function_">routers</span>(<span class="params">context</span>) &#123;</span><br><span class="line">      context.<span class="title function_">commit</span>(<span class="string">&#x27;routers&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="title function_">routers</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;getters&quot;</span>, state)</span><br><span class="line">      <span class="keyword">return</span> state.<span class="property">routers</span></span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    <span class="attr">routers</span>: routers,</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// 数据持久化</span></span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">createPersistedState</span>(&#123;</span><br><span class="line">    <span class="comment">//key是存储数据的键名</span></span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;routersData&#x27;</span>,</span><br><span class="line">    <span class="comment">//paths是存储state中的那些数据，如果是模块下具体的数据需要加上模块名称，如user.token  </span></span><br><span class="line">    <span class="attr">paths</span>: [<span class="string">&quot;routers.routers&quot;</span>]</span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;)</span><br><span class="line">​</span><br><span class="line">​</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line"><span class="comment">//我的动态路由模板</span></span><br><span class="line"><span class="comment">//动态路由</span></span><br><span class="line"><span class="keyword">const</span> dynamicRoute = [&#123;</span><br><span class="line">  <span class="string">&quot;path&quot;</span>: <span class="string">&quot;/main&quot;</span>,</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;main&quot;</span>,</span><br><span class="line">  <span class="string">&quot;redirect&quot;</span>: <span class="string">&quot;/main/index&quot;</span>,</span><br><span class="line">  <span class="string">&quot;component&quot;</span>: <span class="string">&quot;main/main.vue&quot;</span>,</span><br><span class="line">  <span class="string">&quot;children&quot;</span>: [&#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;index&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;index&quot;</span>,</span><br><span class="line">      <span class="string">&quot;component&quot;</span>: <span class="string">&quot;index/index.vue&quot;</span>,</span><br><span class="line">      <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;index&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;首页&quot;</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">        <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span> <span class="comment">//true为菜单栏</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;Configuration&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Configuration&quot;</span>,</span><br><span class="line">      <span class="string">&quot;redirect&quot;</span>: <span class="string">&quot;Configuration/route&quot;</span>,</span><br><span class="line">      <span class="string">&quot;component&quot;</span>: <span class="string">&quot;Configuration/index.vue&quot;</span>,</span><br><span class="line">      <span class="string">&quot;roles&quot;</span>: [<span class="string">&#x27;developer&#x27;</span>, <span class="string">&quot;admin&quot;</span>], <span class="comment">//  developer、admin角色的用户才能访问该页面</span></span><br><span class="line">      <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;配置&quot;</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">        <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;children&quot;</span>: [&#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;route&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;route&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;Configuration/route/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;菜单&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;Configuration/user/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;用户管理&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;Configuration/admin/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;管理员管理&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        </span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;userEdit&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;userEdit&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;Configuration/user/user-Edit.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;编辑用户&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">false</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,  </span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;path&quot;</span>: <span class="string">&quot;check&quot;</span>,</span><br><span class="line">      <span class="string">&quot;name&quot;</span>: <span class="string">&quot;check&quot;</span>,</span><br><span class="line">      <span class="string">&quot;redirect&quot;</span>: <span class="string">&quot;check/user&quot;</span>,</span><br><span class="line">      <span class="string">&quot;component&quot;</span>: <span class="string">&quot;check/index.vue&quot;</span>,</span><br><span class="line">      <span class="string">&quot;roles&quot;</span>: [<span class="string">&#x27;developer&#x27;</span>, <span class="string">&quot;admin&quot;</span>, <span class="string">&quot;check&quot;</span>], <span class="comment">//  developer、admin角色的用户才能访问该页面</span></span><br><span class="line">      <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;审核&quot;</span>,</span><br><span class="line">        <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">        <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&quot;children&quot;</span>: [&#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;checkUser&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;check/check-user/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;用户实名审核&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;enterprise&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;checkEnterprise&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;check/check-enterprise/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;企业认证审核&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;checkNormImage&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;checkNormImage&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;check/check-norm-image/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;标准照认证审核&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="string">&quot;path&quot;</span>: <span class="string">&quot;checkHiringJobs&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;checkHiringJobs&quot;</span>,</span><br><span class="line">          <span class="string">&quot;component&quot;</span>: <span class="string">&quot;check/check-hiring-Jobs/index.vue&quot;</span>,</span><br><span class="line">          <span class="string">&quot;meta&quot;</span>: &#123;</span><br><span class="line">            <span class="string">&quot;title&quot;</span>: <span class="string">&quot;求职、招聘认证审核&quot;</span>,</span><br><span class="line">            <span class="string">&quot;icon&quot;</span>: <span class="string">&quot;el-icon-location&quot;</span>,</span><br><span class="line">            <span class="string">&quot;menu&quot;</span>:<span class="literal">true</span></span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">​</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;, ]</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> dynamicRoute</span><br></pre></td></tr></table></figure><p>路由管理界面（可能有不完善的地方）</p><img src="https://img-blog.csdnimg.cn/cc4035a65c2b434ea23f2b1aba41edfa.png" class=""><p>讲一讲遇到的坑及注意点</p><p>“component”: “check/check-norm-image/index.vue”, 用字符串再在解析，不要像静态路由一样。否则第一次进去可以，刷新就变空白</p><p>此处为重要的一点，直接用next()不行</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">next</span>(&#123;</span><br><span class="line">      ...to, <span class="comment">// next(&#123; ...to &#125;)的目的,是保证路由添加完了再进入页面 (可以理解为重进一次)</span></span><br><span class="line">      <span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">// 重进一次, 不保留重复历史</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><p>3）由于添加完路由还会重复执行一遍路由守卫，所有必须确保不要一直死循环添加路由。否则直接崩溃。这里我用的是isToken变量确保不循环。</p><p>分享：</p><p>走进了一间屋子，如果你是最牛的人，那么你就走错了地方。</p><p>我的理解：你将没有进步的空间，止步于此。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1、什么是动态路由？&lt;br&gt;2、动态路由的好处&lt;br&gt;3、动态路由如何实现&lt;/p&gt;
&lt;p&gt;1、什么是动态路由？&lt;/p&gt;
&lt;p&gt;动态路由，动态即不是写死的，是可变的。我们可以根据自己不同的需求加载不同的路由，做到不同的实现及页面的渲染。动态的路由存储可分为两种，一种是将路由存</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>解决宝塔 Nginx 跨域问题Access-Control-Allow-Origin</title>
    <link href="http://example.com/2018/12/22/%E7%AC%AC%E4%BA%8C%E5%8D%81%E7%AF%87/"/>
    <id>http://example.com/2018/12/22/%E7%AC%AC%E4%BA%8C%E5%8D%81%E7%AF%87/</id>
    <published>2018-12-22T07:38:19.000Z</published>
    <updated>2022-08-04T13:34:41.561Z</updated>
    
    <content type="html"><![CDATA[<p>何为跨域？<br>1、资源跳转： A链接、重定向、表单提交<br>2.资源嵌入：<br>3.脚本请求： js发起的ajax请求、dom和js对象的跨域操作等<br>何为同源策略？<br>同源策略/SOP（Same origin policy）是一种约定，由Netscape公司1995年引入浏览器，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到XSS、CSFR等攻击。所谓同源是指”协议+域名+端口”三者相同，即便两个不同的域名指向同一个ip地址，也非同源。</p><p>1.Cookie、LocalStorage 和 IndexDB 无法读取<br>2.DOM 和 Js对象无法获得<br>3.AJAX 请求不能发送<br>简单的讲？？</p><p>a 前端页面想调取 b 的接口，如果 a、b 页面的协议、域名、端口、子域名不同，所进行的访问行动都是跨域的，而浏览器为了安全问题一般都限制了跨域访问，也就是不允许跨域请求资源。比如我们在使用 CDN 时就经常会遇到跨域问题。</p><p>咋解决？</p><p>1、在b服务器的站点里</p><p>2、点击配置文件，然后下拉到倒数第三行，将如下代码复制添加</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">add_header &#x27;Access-Control-Allow-Origin&#x27;   &#x27;*&#x27;;</span><br><span class="line">add_header &#x27;Access-Control-Allow-Credentials&#x27;   &#x27;true&#x27;;</span><br><span class="line">add_header &#x27;Access-Control-Allow-Methods&#x27;  &#x27;GET, POST, OPTIONS&#x27;;</span><br></pre></td></tr></table></figure><p>3、具体如下图：</p><img src="https://img-blog.csdnimg.cn/cdd7ce9bea6a4f9ca995094ec52eaa7f.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA55SY5bem5bem,size_20,color_FFFFFF,t_70,g_se,x_16" class="">]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;何为跨域？&lt;br&gt;1、资源跳转： A链接、重定向、表单提交&lt;br&gt;2.资源嵌入：&lt;br&gt;3.脚本请求： js发起的ajax请求、dom和js对象的跨域操作等&lt;br&gt;何为同源策略？&lt;br&gt;同源策略/SOP（Same origin policy）是一种约定，由Netscape公</summary>
      
    
    
    
    <category term="nginx" scheme="http://example.com/categories/nginx/"/>
    
    
    <category term="nginx" scheme="http://example.com/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Django中session的使用</title>
    <link href="http://example.com/2018/12/12/%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AF%87/"/>
    <id>http://example.com/2018/12/12/%E7%AC%AC%E5%8D%81%E4%B9%9D%E7%AF%87/</id>
    <published>2018-12-12T03:52:10.000Z</published>
    <updated>2022-08-04T13:30:54.795Z</updated>
    
    <content type="html"><![CDATA[<p>启用session<br>首先确认在 MIDDLEWARE_CLASSES中确保它包含’django.contrib.sessions.middleware.SessionMiddleware’，如果不想使用用session会话可以删除这一项</p><p>配置session引擎<br>默认情况下，django框架会将session数据存储在数据库（django框架中默认创建的model里有存储session的model，这也是为什么在使用前需执行创建数据库操作的原因，使用django.contrib.sessions.models.Session模型）中。从数据库相比其他存储session的方式慢一点，所以可以配置django来存储session到文件系统或者缓存中。</p><p>使用数据库支持的session<br>如果你想用数据库存储session，需要添加’django.contrib.sessions’ 到你的INSTALLED_APPS设置中。并且创建存储session数据的表。</p><p>使用基于缓存的session<br>使用缓存存储session，在性能上会比使用数据库更快。</p><p>使用缓存来存储session必须先进行配置缓存</p><p>缺点：本地内存使用缓存不能长时间保留数据，所以不是好的选择，而且直接使用文件或者数据库比文件或数据库缓存速度快。本地缓存系统不是多进程安全的。</p><p>使用CACHES中可以定义多个缓存，Django使用默认缓存，若要用其他缓存，可以设置SESSIONCACHEALIAS为该缓存的名字</p><p>配置好缓存之后，有两种缓存可供选择</p><p>对于简单的缓存session，可以设置SESSIONENGINE为’django.contrib.sessions.backends.cache’,这正方式就是将数据缓存在内存中，不做持久化存储，如果缓存填满或者缓存服务器重启，缓存数据就可能会被清理掉</p><p>持久化数据缓存就要使用数据库，设置SESSIONENGINE为’django.contrib.sessions.backends.cacheddb’,在写数据的时候使用缓存，读取时先读缓存中的数据，如果缓存中数据被清理了，就从数据库中读取两种缓存方式都很快，简单的更快一点，因为没有做数据持久化特殊说明：在1.7 版之前，cacheddb 永远使用default缓存而不是SESSIONCACHE*ALIAS。</p><p>使用缓存例子：<br>SESSION_ENGINE = ‘django.contrib.sessions.backends.cache’</p><p>SESSIONCACHEALIAS = ‘default’#表示使用缓存的别名，在CACHES中寻找,下面有default和db1两种选择</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">遇到问题没人解答？小编创建了一个Python学习交流QQ群：857662006 </span></span><br><span class="line"><span class="string">寻找有志同道合的小伙伴，互帮互助,群里还有不错的视频学习教程和PDF电子书！</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">   CACHES = &#123;</span><br><span class="line">   <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">   <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;LOCATION&#x27;</span>: [</span><br><span class="line">   <span class="string">&#x27;172.19.26.240:11211&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;172.19.26.242:11211&#x27;</span>,</span><br><span class="line">   ]</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="string">&#x27;db1&#x27;</span>: &#123;</span><br><span class="line">   <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;LOCATION&#x27;</span>: [</span><br><span class="line">   <span class="string">&#x27;172.19.26.240:11211&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;172.19.26.242:11211&#x27;</span>,</span><br><span class="line">   ]</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">### 附加内容</span></span><br><span class="line"></span><br><span class="line">   CACHES的格式，默认：</span><br><span class="line">   &#123;</span><br><span class="line">   <span class="string">&#x27;default&#x27;</span>:&#123;</span><br><span class="line">   <span class="string">&#x27;BACKEND&#x27;</span>:<span class="string">&#x27;django.core.cache.backends.locmen.LocMemCache&#x27;</span>,</span><br><span class="line">   &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>一个字典包含所有缓存要使用的设置它是一个嵌套字典，其内容将高速缓存别名映射到包含单个高速缓存的选项的字典中。</p><p>CACHES设置必须配置‘default’缓存；还可以指定任何数量的附加高速缓存。如果您正在使用本地内存高速缓存之外的其他高速缓存后端，或者需要定义多个高速缓存，这就需要添加其他高速缓存项。以下高速缓存选项可用。<br>BACKEND<br>默认值：’’（空字符串）<br>要使用的缓存后端。内置高速缓存后端是：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;django.core.cache.backends.db.DatabaseCache&#x27;</span></span><br><span class="line"><span class="string">&#x27;django.core.cache.backends.dummy.DummyCache&#x27;</span></span><br><span class="line"><span class="string">&#x27;django.core.cache.backends.filebased.FileBasedCache&#x27;</span></span><br><span class="line"><span class="string">&#x27;django.core.cache.backends.locmem.LocMemCache&#x27;</span></span><br><span class="line"><span class="string">&#x27;django.core.cache.backends.memcached.MemcachedCache&#x27;</span></span><br><span class="line"><span class="string">&#x27;django.core.cache.backends.memcached.PyLibMCCache&#x27;</span></span><br><span class="line">通过将BACKEND设置为缓存后端类的完全限定路径（即mypackage.backends.whatever.WhateverCache），您可以使用未随Django提供的缓存后端。 ）。</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>基于文件的session<br>使用基于文件的session，使用SESSIONENGINE为’django.contrib.sessions.backends.file’,使用SESSIONFILE_PATH设置文件的位置，如果不设会使用默认存储位置为，它的默认值来自tempfile.gettempdir()的输出，大部分情况是/tmp</p><p>使用基于Cookie的session<br>要使用基于Cookie 的会话，请设置SESSIONENGINE 为”django.contrib.sessions.backends.signedcookies”。此时，会话数据的存储将使用Django 的加密签名 工具和SECRET_KEY 设置。<br>注<br>建议保留SESSIONCOOKIEHTTPONLY 设置为True 以防止从JavaScript 中访问存储的数据。</p><p>session的使用</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># 获取、设置、删除Session中数据</span></span><br><span class="line"> </span><br><span class="line">request.session[<span class="string">&#x27;k1&#x27;</span>]</span><br><span class="line">   </span><br><span class="line">request.session.get(<span class="string">&#x27;k1&#x27;</span>,<span class="literal">None</span>)   </span><br><span class="line"></span><br><span class="line">request.session[<span class="string">&#x27;k1&#x27;</span>] = <span class="number">123</span>   </span><br><span class="line"></span><br><span class="line">request.session.setdefault(<span class="string">&#x27;k1&#x27;</span>,<span class="number">123</span>) <span class="comment"># 存在则不设置   </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">del</span> request.session[<span class="string">&#x27;k1&#x27;</span>]<span class="comment">#删除某个键值对   </span></span><br><span class="line">      </span><br><span class="line"></span><br><span class="line"><span class="comment"># 所有 键、值、键值对   </span></span><br><span class="line"></span><br><span class="line">request.session.keys()   </span><br><span class="line"></span><br><span class="line">request.session.values()</span><br><span class="line">   </span><br><span class="line">request.session.items()   </span><br><span class="line"></span><br><span class="line">request.session.iterkeys()  </span><br><span class="line"></span><br><span class="line">request.session.itervalues()   </span><br><span class="line"></span><br><span class="line">request.session.iteritems()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用户session的随机字符串</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">request.session.session_key</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将所有Session失效日期小于当前日期的数据删除</span></span><br><span class="line">   </span><br><span class="line">request.session.clear_expired()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查 用户session的随机字符串 在数据库中是否</span></span><br><span class="line">   </span><br><span class="line">request.session.exists(<span class="string">&quot;session_key&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除当前用户的所有Session数据   </span></span><br><span class="line"></span><br><span class="line">request.session.delete(<span class="string">&quot;session_key&quot;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment"># 注销使用</span></span><br><span class="line">   </span><br><span class="line">request.session.clear()   </span><br><span class="line"></span><br><span class="line"><span class="comment">#设置超时时间，set_expiry(value)方法是在最后一次刷新开始计算   </span></span><br><span class="line"></span><br><span class="line">request.session.set_expiry(value)</span><br><span class="line">   </span><br><span class="line">* 如果value是个整数，session会在些秒数后失效。</span><br><span class="line">   </span><br><span class="line">* 如果value是个datatime或timedelta，session就会在这个时间后失效。</span><br><span class="line">  </span><br><span class="line">* 如果value是<span class="number">0</span>,用户关闭浏览器session就会失效。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* 如果value是<span class="literal">None</span>,session会依赖全局session失效策略。</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;启用session&lt;br&gt;首先确认在 MIDDLEWARE_CLASSES中确保它包含’django.contrib.sessions.middleware.SessionMiddleware’，如果不想使用用session会话可以删除这一项&lt;/p&gt;
&lt;p&gt;配置sessio</summary>
      
    
    
    
    <category term="django" scheme="http://example.com/categories/django/"/>
    
    
    <category term="django" scheme="http://example.com/tags/django/"/>
    
  </entry>
  
  <entry>
    <title>Vue3setup函数中使用Vuex中使用mapState和mapGetters的hooks</title>
    <link href="http://example.com/2018/12/03/%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AF%87/"/>
    <id>http://example.com/2018/12/03/%E7%AC%AC%E5%8D%81%E5%85%AB%E7%AF%87/</id>
    <published>2018-12-03T08:12:30.000Z</published>
    <updated>2022-08-04T13:26:10.071Z</updated>
    
    <content type="html"><![CDATA[<p>Vue3setup函数中使用Vuex中使用mapState和mapGetters的hooks</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// useMapper.js 核心</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// mapper传入的, mapFn是使用的map方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useMapper</span>(<span class="params">mapper, mapFn</span>) &#123;</span><br><span class="line">  <span class="comment">// 拿到store对象</span></span><br><span class="line">  <span class="keyword">const</span> store = <span class="title function_">useStore</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 获取到对应的对象的function &#123;counter: function, name: function, age: function&#125;</span></span><br><span class="line">  <span class="keyword">const</span> storeDataFns = <span class="title function_">mapFn</span>(mapper)</span><br><span class="line">  <span class="comment">// 这些对应的是一个个对象， 函数</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 对数据进行转换 &#123;counter: ref, name: ref, age: ref&#125;</span></span><br><span class="line">  <span class="keyword">const</span> storeData = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 使用Object.keys获取storeGettersFns的key值</span></span><br><span class="line">  <span class="comment">// 在使用forEach遍历每一个key</span></span><br><span class="line">  <span class="title class_">Object</span>.<span class="title function_">keys</span>(storeDataFns).<span class="title function_">forEach</span>(<span class="function"><span class="params">fnKey</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 取出storeDataFns中的函数，调用函数的bind绑定一个this，fn就有了this，</span></span><br><span class="line">    <span class="comment">// 这个this必须是个对象，且需要有$store属性，且需要个值</span></span><br><span class="line">    <span class="keyword">const</span> fn = storeDataFns[fnKey].<span class="title function_">bind</span>(&#123;<span class="attr">$store</span>: store&#125;);</span><br><span class="line">    <span class="comment">// 取出的函数用computed包裹，根据key重新赋值给storeGetters</span></span><br><span class="line">    storeData[fnKey] = <span class="title function_">computed</span>(fn);</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> storeData</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>mapState的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在setup中使用mapState的hooks</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useMapper &#125; <span class="keyword">from</span> <span class="string">&#x27;./useMapper&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入一个模块名</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useState</span>(<span class="params">moduleName, mapper</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> mapperFn = mapState</span><br><span class="line">  <span class="comment">// 判断传入的模块名是否是String类型，且长度不为0</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> moduleName === <span class="string">&#x27;string&#x27;</span> &amp;&amp; moduleName.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    mapperFn = <span class="title function_">createNamespacedHelpers</span>(moduleName).<span class="property">mapState</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    mapper = moduleName</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMapper</span>(mapper, mapperFn)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>mapGetters的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在setup中使用mapGetters的hooks</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters, createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useMapper &#125; <span class="keyword">from</span> <span class="string">&#x27;./useMapper&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">useGetters</span>(<span class="params">moduleName, mapper</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> mapperFn = mapGetters</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> moduleName === <span class="string">&#x27;string&#x27;</span> &amp;&amp; moduleName.<span class="property">length</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    mapperFn = <span class="title function_">createNamespacedHelpers</span>(moduleName).<span class="property">mapGetters</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    mapper = moduleName</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">useMapper</span>(mapper, mapperFn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>应用</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;homeCounter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;doubleHomeCounter&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 没加namespaced: true,的写法 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;h2&gt;&#123;&#123;$store.getters.doubleHomeCounter&#125;&#125;&lt;/h2&gt; --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 加了namespaced: true,后的写法 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters[&quot;home/doubleHomeCounter&quot;]&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 写法三</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">const</span> &#123; mapState, mapGetters &#125; = <span class="title function_">createNamespacedHelpers</span>(<span class="string">&quot;home&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">  </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> &#123; useState, useGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;../hooks/index&#x27;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> state = <span class="title function_">useState</span>(<span class="string">&quot;home&quot;</span>, [<span class="string">&quot;homeCounter&quot;</span>])</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> getters = <span class="title function_">useGetters</span>(<span class="string">&quot;home&quot;</span>, [<span class="string">&quot;doubleHomeCounter&quot;</span>])</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        ...state,</span></span><br><span class="line"><span class="language-javascript">        ...getters</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Vue3setup函数中使用Vuex中使用mapState和mapGetters的hooks&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>python实现图片验证码</title>
    <link href="http://example.com/2018/11/20/%E7%AC%AC%E5%8D%81%E4%B8%83%E7%AF%87/"/>
    <id>http://example.com/2018/11/20/%E7%AC%AC%E5%8D%81%E4%B8%83%E7%AF%87/</id>
    <published>2018-11-20T03:40:39.000Z</published>
    <updated>2022-08-04T13:22:35.186Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 获取验证码</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">yanzm</span>(<span class="params">req</span>):</span><br><span class="line">    <span class="comment"># 设置背景色</span></span><br><span class="line">    bg_color = (<span class="number">100</span>, <span class="number">100</span>, <span class="number">255</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 设置画布长宽（像素）</span></span><br><span class="line">    width = <span class="number">400</span></span><br><span class="line">    height = <span class="number">100</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 通过设置生成新的画布</span></span><br><span class="line">    im = Image.new(<span class="string">&#x27;RGB&#x27;</span>, (width, height), bg_color)</span><br><span class="line">    <span class="comment"># 展示画布</span></span><br><span class="line">    draw = ImageDraw.Draw(im)</span><br><span class="line">    <span class="comment"># 验证码文本</span></span><br><span class="line">    <span class="comment"># string = &#x27;MSBC&#x27;</span></span><br><span class="line">    string = [<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>,<span class="string">&#x27;&#x27;</span>]</span><br><span class="line">    <span class="comment"># 随机选取4个值作为验证码</span></span><br><span class="line">    rand_str = <span class="string">&#x27;0123456789&#x27;</span></span><br><span class="line">    fangf=<span class="string">&#x27;+-*&#x27;</span></span><br><span class="line">    <span class="comment"># for i in range(0, 4):</span></span><br><span class="line">    string[<span class="number">0</span>] = rand_str[random.randrange(<span class="number">0</span>, <span class="built_in">len</span>(rand_str))]</span><br><span class="line">    string[<span class="number">1</span>] = random.choice(fangf)</span><br><span class="line">    string[<span class="number">2</span>] = rand_str[random.randrange(<span class="number">0</span>, <span class="built_in">len</span>(rand_str))]</span><br><span class="line">    string[<span class="number">3</span>] = <span class="string">&#x27;=&#x27;</span></span><br><span class="line">    answer = <span class="built_in">str</span>(<span class="built_in">eval</span>(string[<span class="number">0</span>]+string[<span class="number">1</span>]+string[<span class="number">2</span>]))</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    font = ImageFont.truetype(<span class="string">&#x27;D:\\huikeproject\\web-huike\\webHuike\\static\\arialuni.ttf&#x27;</span>,<span class="number">70</span>)</span><br><span class="line">    <span class="comment"># 构造字体颜色</span></span><br><span class="line">    fontcolor = (<span class="number">255</span>, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">    <span class="comment"># 绘制4个字</span></span><br><span class="line">    draw.text((random.randint(<span class="number">10</span>, <span class="number">30</span>), (random.randint(<span class="number">0</span>, <span class="number">10</span>))), string[<span class="number">0</span>], font=font, fill=fontcolor)</span><br><span class="line">    draw.text((random.randint(<span class="number">90</span>, <span class="number">130</span>), (random.randint(<span class="number">0</span>, <span class="number">10</span>))), string[<span class="number">1</span>], font=font, fill=fontcolor)</span><br><span class="line">    draw.text((random.randint(<span class="number">180</span>, <span class="number">230</span>), (random.randint(<span class="number">0</span>, <span class="number">10</span>))), string[<span class="number">2</span>], font=font, fill=fontcolor)</span><br><span class="line">    draw.text((random.randint(<span class="number">270</span>, <span class="number">330</span>), (random.randint(<span class="number">0</span>, <span class="number">10</span>))), string[<span class="number">3</span>], font=font, fill=fontcolor)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 使用point函数绘制噪点</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">1000</span>):</span><br><span class="line">        xy = (random.randrange(<span class="number">0</span>, width), random.randrange(<span class="number">0</span>, height))</span><br><span class="line">        fill = (random.randrange(<span class="number">0</span>, <span class="number">255</span>), <span class="number">255</span>, random.randrange(<span class="number">0</span>, <span class="number">255</span>))</span><br><span class="line">        draw.point(xy, fill=fill)</span><br><span class="line">    <span class="comment"># 释放画笔</span></span><br><span class="line">    <span class="keyword">del</span> draw</span><br><span class="line">    im.save(<span class="string">&#x27;D:\huikeproject\web-huike\webHuike\static\yanz.png&#x27;</span>, <span class="string">&#x27;png&#x27;</span>)</span><br><span class="line">    encoded = base64.b64encode(<span class="built_in">open</span>(<span class="string">&#x27;D:\huikeproject\web-huike\webHuike\static\yanz.png&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>).read())</span><br><span class="line">    basema=encoded.decode()</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># im.show()</span></span><br><span class="line">    req.session[<span class="string">&#x27;yan&#x27;</span>]=answer</span><br><span class="line">    <span class="comment"># print(&#x27;生成的验证码答案:&#x27;)</span></span><br><span class="line">    <span class="comment"># print(req.session.get(&#x27;yan&#x27;))</span></span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;data&quot;</span>:<span class="number">200</span>,<span class="string">&#x27;base&#x27;</span>:basema&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 登录</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">req</span>):</span><br><span class="line">    b = json.loads(req.body)</span><br><span class="line">    sessions=Session.objects.<span class="built_in">all</span>()</span><br><span class="line">    answerlist=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> sessions:</span><br><span class="line">        answerlist.append(i.get_decoded()[<span class="string">&#x27;yan&#x27;</span>])</span><br><span class="line">    answer=answerlist[-<span class="number">1</span>]</span><br><span class="line">    user = CustomerModel.objects.<span class="built_in">filter</span>(nickname=b[<span class="string">&#x27;username&#x27;</span>], password=b[<span class="string">&#x27;password&#x27;</span>]).values()</span><br><span class="line">    <span class="keyword">if</span> user <span class="keyword">and</span> b[<span class="string">&#x27;yz&#x27;</span>]==answer:</span><br><span class="line">        encoded_jwt = jwt.encode(&#123;<span class="string">&#x27;nickname&#x27;</span>: b[<span class="string">&#x27;username&#x27;</span>],<span class="string">&quot;password&quot;</span>:b[<span class="string">&#x27;password&#x27;</span>]&#125;, <span class="string">&#x27;secret&#x27;</span>, algorithm=<span class="string">&#x27;HS256&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="number">200</span>, <span class="string">&quot;data&quot;</span>: <span class="string">&quot;登录成功&quot;</span>,<span class="string">&quot;token&quot;</span>:encoded_jwt,<span class="string">&#x27;user&#x27;</span>:<span class="built_in">list</span>(user)&#125;)</span><br><span class="line">    <span class="keyword">elif</span> user <span class="keyword">and</span> b[<span class="string">&#x27;yz&#x27;</span>]!=answer:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="number">401</span>, <span class="string">&quot;data&quot;</span>: <span class="string">&quot;登录失败,验证码错误&quot;</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;status&quot;</span>: <span class="number">400</span>, <span class="string">&quot;data&quot;</span>: <span class="string">&quot;登录失败,用户不存在&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="python" scheme="http://example.com/categories/python/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>解决因为微信字体过大导致样式变乱的问题</title>
    <link href="http://example.com/2018/11/11/%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AF%87/"/>
    <id>http://example.com/2018/11/11/%E7%AC%AC%E5%8D%81%E5%85%AD%E7%AF%87/</id>
    <published>2018-11-11T08:10:19.000Z</published>
    <updated>2022-08-04T13:21:18.493Z</updated>
    
    <content type="html"><![CDATA[<p>1、安卓手机禁止微信客户端修改字体大小：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">&lt;!-- 强制禁止用户修改微信客户端的字体大小------ --&gt;</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">WeixinJSBridge</span> == <span class="string">&quot;object&quot;</span> &amp;&amp; <span class="keyword">typeof</span> <span class="title class_">WeixinJSBridge</span>.<span class="property">invoke</span> == <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">   <span class="title function_">handleFontSize</span>();</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">   <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">addEventListener</span>) &#123;</span><br><span class="line">   <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;WeixinJSBridgeReady&quot;</span>, handleFontSize, <span class="literal">false</span>);</span><br><span class="line">   &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="variable language_">document</span>.<span class="property">attachEvent</span>) &#123;</span><br><span class="line">   <span class="variable language_">document</span>.<span class="title function_">attachEvent</span>(<span class="string">&quot;WeixinJSBridgeReady&quot;</span>, handleFontSize);</span><br><span class="line">   <span class="variable language_">document</span>.<span class="title function_">attachEvent</span>(<span class="string">&quot;onWeixinJSBridgeReady&quot;</span>, handleFontSize);  &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="keyword">function</span> <span class="title function_">handleFontSize</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// 设置网页字体为默认大小</span></span><br><span class="line">   <span class="title class_">WeixinJSBridge</span>.<span class="title function_">invoke</span>(<span class="string">&#x27;setFontSizeCallback&#x27;</span>, &#123; <span class="string">&#x27;fontSize&#x27;</span> : <span class="number">0</span> &#125;);</span><br><span class="line">   <span class="comment">// 重写设置网页字体大小的事件</span></span><br><span class="line">   <span class="title class_">WeixinJSBridge</span>.<span class="title function_">on</span>(<span class="string">&#x27;menu:setfont&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="title class_">WeixinJSBridge</span>.<span class="title function_">invoke</span>(<span class="string">&#x27;setFontSizeCallback&#x27;</span>, &#123; <span class="string">&#x27;fontSize&#x27;</span> : <span class="number">0</span> &#125;);</span><br><span class="line">   &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;!-- 强制禁止用户修改微信客户端的字体大小---end--- --&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;1、安卓手机禁止微信客户端修改字体大小：&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line</summary>
      
    
    
    
    <category term="公众号" scheme="http://example.com/categories/%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
    
    <category term="公众号" scheme="http://example.com/tags/%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>h5页面+微信公众号实现网页授权</title>
    <link href="http://example.com/2018/11/05/%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AF%87/"/>
    <id>http://example.com/2018/11/05/%E7%AC%AC%E5%8D%81%E4%BA%94%E7%AF%87/</id>
    <published>2018-11-05T01:30:12.000Z</published>
    <updated>2022-08-04T12:58:03.143Z</updated>
    
    <content type="html"><![CDATA[<p>官方文档:网页授权 | 微信开放文档</p><img src="https://img-blog.csdnimg.cn/c603f325787f40dfaf40f540c683fc58.png" class=""><p>其实实现网页授权只需要走三步:</p><img src="https://img-blog.csdnimg.cn/8baa41ff513b43f2bff844e5baab698d.png" class=""><p>我这里前端只需要将code码发给后端,剩下步骤由后端来返回用户信息,我这里使用的是非静默授权,只需要将appid和回调的地址写好然后引导用户跳转到此页面即可</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scope为snsapi_userinfo：</span><br><span class="line"> </span><br><span class="line">https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxf0e81c3bee622d60&amp;redirect_uri=http%3A%2F%2Fnba.bluewebgame.com%2Foauth_response.php&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span></span></span><br><span class="line"><span class="tag">   <span class="attr">class</span>=<span class="string">&quot;subbtn&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">href</span>=<span class="string">&quot;https://open.weixin.qq.com/connect/oauth2/authorize?appid=*****&amp;redirect_uri=****&amp;response_type=code&amp;scope=snsapi_userinfo&amp;state=STATE#wechat_redirect&quot;</span></span></span><br><span class="line"><span class="tag">&gt;</span>开始答题<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后在回调的页面的url里去截取code码</p><img src="https://img-blog.csdnimg.cn/18fb95d713184799899ee76765f0e7d8.png" class=""><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>;</span><br><span class="line"><span class="keyword">var</span> newurl = url.<span class="title function_">split</span>(<span class="string">&quot;=&quot;</span>)[<span class="number">1</span>];</span><br><span class="line"><span class="keyword">var</span> code = newurl.<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> res = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&quot;/api/login/register&quot;</span>, &#123;</span><br><span class="line">   <span class="attr">code</span>: code,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>补充:</p><p>这里上线vue3项目的时候需要修改路由模式,将history修改为hash模式,否则无法正常显示页面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory,createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(process.<span class="property">env</span>.<span class="property">BASE_URL</span>),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>还有部署到宝塔(apache)后访问后端接口出现问题,需要在配置文件中修改后端接口,修改线上的前端跨域</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ProxyPass /api http://127.0.0.1:8021</span><br><span class="line">ProxyPassReverse /api http://127.0.0.1:8021</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;官方文档:网页授权 | 微信开放文档&lt;/p&gt;
&lt;img src=&quot;https://img-blog.csdnimg.cn/c603f325787f40dfaf40f540c683fc58.png&quot; class=&quot;&quot;&gt;
&lt;p&gt;其实实现网页授权只需要走三步:&lt;/p&gt;
&lt;img </summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>python的无限极分类</title>
    <link href="http://example.com/2018/10/18/%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AF%87/"/>
    <id>http://example.com/2018/10/18/%E7%AC%AC%E5%8D%81%E5%9B%9B%E7%AF%87/</id>
    <published>2018-10-18T12:50:52.000Z</published>
    <updated>2022-08-04T12:53:46.891Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self,req</span>):</span><br><span class="line">    <span class="comment"># 树形结构</span></span><br><span class="line">    alldata = DepartModel.objects.values()</span><br><span class="line">    data=DepartModel.objects.values()</span><br><span class="line">    lis=[]</span><br><span class="line">    obj=&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> data:</span><br><span class="line">        obj[i[<span class="string">&#x27;id&#x27;</span>]]=i</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> data:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> j[<span class="string">&#x27;bid&#x27;</span>]:</span><br><span class="line">            lis.append(obj[j[<span class="string">&#x27;id&#x27;</span>]])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            parentid=j[<span class="string">&#x27;bid&#x27;</span>]</span><br><span class="line">            <span class="keyword">if</span> <span class="string">&#x27;children&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> obj[parentid]:</span><br><span class="line">                obj[parentid][<span class="string">&#x27;children&#x27;</span>]=[]</span><br><span class="line">            obj[parentid][<span class="string">&#x27;children&#x27;</span>].append(obj[j[<span class="string">&#x27;id&#x27;</span>]])</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&#x27;获取信息成功&#x27;</span>, <span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>,<span class="string">&#x27;data&#x27;</span>:lis,<span class="string">&#x27;alldata&#x27;</span>:<span class="built_in">list</span>(alldata)&#125;)</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="python" scheme="http://example.com/categories/python/"/>
    
    
    <category term="python" scheme="http://example.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>vue简单的配置前端跨域+滚动条样式</title>
    <link href="http://example.com/2018/10/13/%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AF%87/"/>
    <id>http://example.com/2018/10/13/%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AF%87/</id>
    <published>2018-10-13T00:55:22.000Z</published>
    <updated>2022-08-04T12:52:14.645Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vue.config.js</span></span><br><span class="line"> </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span>=&#123;</span><br><span class="line">    <span class="attr">devServer</span>:&#123;</span><br><span class="line">        <span class="attr">port</span>:<span class="number">8083</span>,</span><br><span class="line">        <span class="attr">open</span>:<span class="literal">true</span>,</span><br><span class="line">        <span class="attr">proxy</span>:<span class="string">&quot;http://cg.montageyy.com&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*滚动条整体粗细样式*/</span></span><br><span class="line">::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="comment">/*高宽分别对应横竖滚动条的尺寸*/</span></span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*滚动条里面小方块*/</span></span><br><span class="line">::-webkit-scrollbar-thumb &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="comment">/* 颜色 */</span></span><br><span class="line">    //  <span class="attribute">background</span>:<span class="number">#3da0ca</span><span class="meta">!important</span>; </span><br><span class="line">    <span class="comment">/* 线性渐变背景 */</span></span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">45deg</span>, <span class="number">#1082b3</span> <span class="number">25%</span>,<span class="number">#1082b3</span> <span class="number">25%</span>, <span class="number">#173581</span> <span class="number">25%</span>, <span class="number">#173581</span> <span class="number">50%</span>,<span class="number">#1082b3</span> <span class="number">50%</span>, <span class="number">#1082b3</span> <span class="number">75%</span>, <span class="number">#173581</span> <span class="number">75%</span>, <span class="number">#173581</span> <span class="number">100%</span> )<span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/*滚动条轨道*/</span></span><br><span class="line">::-webkit-scrollbar-track &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span> <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="meta">!important</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#EDEDED</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;l</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>h5开启摄像头拍照+腾讯云接口人脸验证</title>
    <link href="http://example.com/2018/10/08/%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AF%87/"/>
    <id>http://example.com/2018/10/08/%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AF%87/</id>
    <published>2018-10-08T03:25:52.000Z</published>
    <updated>2022-08-04T12:50:35.225Z</updated>
    
    <content type="html"><![CDATA[<p>前端开启摄像头并拍照将照片的base64码传到后端</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">//登录弹出框</span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> <span class="attr">:rules</span>=<span class="string">&quot;rules&quot;</span> <span class="attr">:show-message</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inp&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入账号&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-user&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">prop</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;form.password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;inp&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">show-password</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">slot</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-lock&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">   <span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">//人脸验证弹出框</span><br><span class="line"><span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">title</span>=<span class="string">&quot;登录验证&quot;</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;dialogFormVisible1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">center</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">:model</span>=<span class="string">&quot;form&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">video</span> <span class="attr">v-if</span>=<span class="string">&quot;xians&quot;</span>  <span class="attr">id</span>=<span class="string">&quot;video&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span>       </span><br><span class="line">            <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">hidden</span> <span class="attr">id</span>=<span class="string">&quot;canvas&quot;</span> <span class="attr">width</span>=<span class="string">&quot;300px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;300px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span> </span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">id</span>=<span class="string">&quot;snap&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;takePhoto1()&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>拍照验证<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">class</span>=<span class="string">&quot;dialog-footer&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//登录验证事件</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">login</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">form</span>.<span class="title function_">validate</span>(<span class="function">(<span class="params">valid</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (valid) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">dialogFormVisible1</span>=<span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">xians</span>=<span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">getMedia</span>()</span></span><br><span class="line"><span class="language-javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&quot;请输入账号和密码&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;&#125;)      </span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//开启摄像头</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">getMedia</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> _this=<span class="variable language_">this</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> constraints = &#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="attr">video</span>: &#123; <span class="attr">width</span>: <span class="number">500</span>, <span class="attr">height</span>: <span class="number">500</span> &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> promise = navigator.<span class="property">mediaDevices</span>.<span class="title function_">getUserMedia</span>(constraints);</span></span><br><span class="line"><span class="language-javascript">        promise.<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">MediaStream</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        video.<span class="property">srcObject</span> = <span class="title class_">MediaStream</span>;</span></span><br><span class="line"><span class="language-javascript">        _this.<span class="property">MediaStreamTrack</span>=<span class="keyword">typeof</span> <span class="title class_">MediaStream</span>.<span class="property">stop</span>===<span class="string">&#x27;function&#x27;</span>?<span class="title class_">MediaStream</span>:<span class="title class_">MediaStream</span>.<span class="title function_">getTracks</span>()[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">        video.<span class="title function_">play</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">PermissionDeniedError</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">PermissionDeniedError</span>);</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//拍照</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">async</span> <span class="title function_">takePhoto1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//获得Canvas对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> video = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;video&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&#x27;2d&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    ctx.<span class="title function_">drawImage</span>(video, <span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>, <span class="number">400</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> photoSrc = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;canvas&quot;</span>).<span class="title function_">toDataURL</span>(<span class="string">&quot;image/jpeg&quot;</span>, <span class="number">0.8</span>);</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> res=<span class="keyword">await</span> <span class="variable language_">this</span>.<span class="property">http</span>.<span class="title function_">post</span>(<span class="string">&#x27;/User/login&#x27;</span>,&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;pic&#x27;</span>:photoSrc,</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;name&#x27;</span>:<span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">username</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;password&#x27;</span>:<span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">password</span></span></span><br><span class="line"><span class="language-javascript">       &#125;)</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              sessionStorage.<span class="title function_">setItem</span>(<span class="string">&quot;token&quot;</span>,res.<span class="property">data</span>.<span class="property">token</span>)</span></span><br><span class="line"><span class="language-javascript">              sessionStorage.<span class="title function_">setItem</span>(<span class="string">&quot;user&quot;</span>,<span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">username</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(<span class="string">&quot;/home&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.$notify(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">title</span>: <span class="string">&#x27;登录成功&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">message</span>: <span class="string">&#x27;欢迎&#x27;</span>+<span class="variable language_">this</span>.<span class="property">form</span>.<span class="property">username</span>+<span class="string">&#x27;登录&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>: <span class="string">&#x27;success&#x27;</span></span></span><br><span class="line"><span class="language-javascript">       &#125;);  </span></span><br><span class="line"><span class="language-javascript">                                          </span></span><br><span class="line"><span class="language-javascript">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span>==<span class="number">501</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;请保证摄像头中有人脸!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">       &#125;<span class="keyword">else</span> <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">code</span>==<span class="number">500</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;登录失败,请检查账号密码以及人脸是否正确&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">       &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">//关闭摄像头</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">cancalCloseVideo</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">this</span>.<span class="property">MediaStreamTrack</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">MediaStreamTrack</span>.<span class="title function_">stop</span>();</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后端通过腾讯云接口进行验证</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 腾讯云注册(如果涉及到注册的逻辑的话)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">txregister</span>(<span class="params">name,image</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cred = credential.Credential(<span class="string">&quot;SecretId&quot;</span>, <span class="string">&quot;SecretKey&quot;</span>)</span><br><span class="line">        httpProfile = HttpProfile()</span><br><span class="line">        httpProfile.endpoint = <span class="string">&quot;iai.tencentcloudapi.com&quot;</span></span><br><span class="line"> </span><br><span class="line">        clientProfile = ClientProfile()</span><br><span class="line">        clientProfile.httpProfile = httpProfile</span><br><span class="line">        client = iai_client.IaiClient(cred, <span class="string">&quot;ap-beijing&quot;</span>, clientProfile)</span><br><span class="line"> </span><br><span class="line">        req = models.CreatePersonRequest()</span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">&quot;GroupId&quot;</span>: <span class="string">&quot;21072107&quot;</span>,</span><br><span class="line">            <span class="string">&quot;PersonName&quot;</span>: name,</span><br><span class="line">            <span class="string">&quot;PersonId&quot;</span>: name,</span><br><span class="line">            <span class="string">&#x27;Image&#x27;</span>:image</span><br><span class="line">        &#125;</span><br><span class="line">        req.from_json_string(json.dumps(params))</span><br><span class="line"> </span><br><span class="line">        resp = client.CreatePerson(req)</span><br><span class="line">        <span class="keyword">return</span> resp</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">except</span> TencentCloudSDKException <span class="keyword">as</span> err:</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 腾讯云登录方法</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">txlogin</span>(<span class="params">name,image</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cred = credential.Credential(<span class="string">&quot;SecretId&quot;</span>, <span class="string">&quot;SecretKey&quot;</span>)</span><br><span class="line">        httpProfile = HttpProfile()</span><br><span class="line">        httpProfile.endpoint = <span class="string">&quot;iai.tencentcloudapi.com&quot;</span></span><br><span class="line"> </span><br><span class="line">        clientProfile = ClientProfile()</span><br><span class="line">        clientProfile.httpProfile = httpProfile</span><br><span class="line">        client = iai_client.IaiClient(cred, <span class="string">&quot;ap-beijing&quot;</span>, clientProfile)</span><br><span class="line"> </span><br><span class="line">        req = models.VerifyFaceRequest()</span><br><span class="line">        params = &#123;</span><br><span class="line">            <span class="string">&#x27;Image&#x27;</span>: image,</span><br><span class="line">            <span class="string">&quot;PersonId&quot;</span>: name</span><br><span class="line">        &#125;</span><br><span class="line">        req.from_json_string(json.dumps(params))</span><br><span class="line">        encoded_jwt = jwt.encode(&#123;<span class="string">&#x27;some&#x27;</span>: <span class="string">&#x27;payload&#x27;</span>&#125;, <span class="string">&#x27;secret&#x27;</span>, algorithm=<span class="string">&#x27;HS256&#x27;</span>)</span><br><span class="line">        resp = client.VerifyFace(req)</span><br><span class="line">        <span class="keyword">return</span> resp</span><br><span class="line">    <span class="keyword">except</span> TencentCloudSDKException <span class="keyword">as</span> err:</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line"><span class="comment"># 登录</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">req</span>):</span><br><span class="line">    b = req.body.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    b = json.loads(b)</span><br><span class="line">    <span class="built_in">str</span> = b[<span class="string">&#x27;pic&#x27;</span>].split(<span class="string">&quot;,&quot;</span>)[<span class="number">1</span>]</span><br><span class="line">    user = UserModel.objects.<span class="built_in">filter</span>(username=b[<span class="string">&#x27;name&#x27;</span>], password=b[<span class="string">&#x27;password&#x27;</span>]).values()</span><br><span class="line">    <span class="keyword">if</span> user:</span><br><span class="line">        encoded_jwt = jwt.encode(&#123;<span class="string">&#x27;some&#x27;</span>: <span class="string">&#x27;payload&#x27;</span>&#125;, <span class="string">&#x27;secret&#x27;</span>, algorithm=<span class="string">&#x27;HS256&#x27;</span>)</span><br><span class="line">        res=txlogin(b[<span class="string">&#x27;name&#x27;</span>],<span class="built_in">str</span>)</span><br><span class="line">        <span class="built_in">print</span>(res)</span><br><span class="line">        <span class="keyword">if</span> res.Score==<span class="number">100</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&#x27;登录成功&#x27;</span>, <span class="string">&#x27;code&#x27;</span>: <span class="number">200</span>,<span class="string">&#x27;token&#x27;</span>: encoded_jwt&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&#x27;人脸验证失败&#x27;</span>, <span class="string">&#x27;code&#x27;</span>: <span class="number">501</span>&#125;)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&quot;message&quot;</span>: <span class="string">&#x27;请输入正确账号密码&#x27;</span>, <span class="string">&#x27;code&#x27;</span>: <span class="number">501</span>&#125;)</span><br></pre></td></tr></table></figure><p>因为我这里购买的是腾讯云人脸识别中人脸验证的接口,所以设计到人员库的使用,这里具体可以看腾讯云官方文档:人脸识别</p><img src="https://img-blog.csdnimg.cn/10b592b6712e40309439e8bd54e536d7.png" class=""><p>因为我这里直接使用的sdk生成代码来完成接口的使用，如果使用的话需要安装一下,具体可以看官方文档:Python-SDK 中心-腾讯云 (tencent.com)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade tencentcloud-sdk-python</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;前端开启摄像头并拍照将照片的base64码传到后端&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="html" scheme="http://example.com/categories/html/"/>
    
    
    <category term="html" scheme="http://example.com/tags/html/"/>
    
  </entry>
  
  <entry>
    <title>css中imgmap的使用(完成图片中的交互效果)</title>
    <link href="http://example.com/2018/09/28/%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AF%87/"/>
    <id>http://example.com/2018/09/28/%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AF%87/</id>
    <published>2018-09-28T02:05:22.000Z</published>
    <updated>2022-08-04T12:46:48.223Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//获取图片坐标点</span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;form_action.php&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">loading</span>=<span class="string">&quot;lazy&quot;</span> <span class="attr">src</span>=<span class="string">&quot;logo.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;runoob.com&quot;</span> <span class="attr">width</span>=<span class="string">&quot;336&quot;</span> <span class="attr">height</span>=<span class="string">&quot;69&quot;</span> <span class="attr">ismap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;planets.gif&quot;</span> <span class="attr">width</span>=<span class="string">&quot;145&quot;</span> <span class="attr">height</span>=<span class="string">&quot;126&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Planets&quot;</span> <span class="attr">usemap</span>=<span class="string">&quot;#planetmap&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">map</span> <span class="attr">name</span>=<span class="string">&quot;planetmap&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">&quot;rect&quot;</span> <span class="attr">coords</span>=<span class="string">&quot;0,0,82,126&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Sun&quot;</span> <span class="attr">href</span>=<span class="string">&quot;sun.htm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">&quot;circle&quot;</span> <span class="attr">coords</span>=<span class="string">&quot;90,58,3&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Mercury&quot;</span> <span class="attr">href</span>=<span class="string">&quot;mercur.htm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">area</span> <span class="attr">shape</span>=<span class="string">&quot;circle&quot;</span> <span class="attr">coords</span>=<span class="string">&quot;124,58,8&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Venus&quot;</span> <span class="attr">href</span>=<span class="string">&quot;venus.htm&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br></pre></td></tr></table></figure><img src="https://img-blog.csdnimg.cn/8d3e20638d784b9ba077ee29e9b7bee1.png" class=""><p> 适应屏幕的改变:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;area</span><br><span class="line">  shape=<span class="string">&quot;poly&quot;</span></span><br><span class="line">  :coords=<span class="string">&quot;onearr&quot;</span></span><br><span class="line">  alt=<span class="string">&quot;map&quot;</span></span><br><span class="line">  @mouseover=<span class="string">&quot;showinfo(1)&quot;</span></span><br><span class="line">  @mouseout=<span class="string">&quot;closeshow&quot;</span></span><br><span class="line">  href=<span class="string">&quot;#&quot;</span></span><br><span class="line">/&gt;</span><br><span class="line"> </span><br><span class="line"><span class="comment">//script</span></span><br><span class="line"> </span><br><span class="line"><span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    x1.<span class="property">value</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientWidth</span>;</span><br><span class="line">    y1.<span class="property">value</span> = <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">clientHeight</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">centermethod</span> = (<span class="params">k</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">var</span> res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  k.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (index % <span class="number">2</span>) &#123;</span><br><span class="line">      item = item * (y1.<span class="property">value</span> / <span class="number">969</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       item = <span class="title class_">Math</span>.<span class="title function_">round</span>(item * (x1.<span class="property">value</span> / <span class="number">1920</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    res += item.<span class="title function_">toString</span>();</span><br><span class="line">    <span class="keyword">if</span> (index != k.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">       res += <span class="string">&quot;,&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> onearr = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="title function_">centermethod</span>([<span class="number">482</span>, <span class="number">178</span>, <span class="number">546</span>, <span class="number">192</span>, <span class="number">492</span>, <span class="number">407</span>, <span class="number">415</span>, <span class="number">390</span>]);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=</summary>
      
    
    
    
    <category term="css" scheme="http://example.com/categories/css/"/>
    
    
    <category term="css" scheme="http://example.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>响应式布局rem使用</title>
    <link href="http://example.com/2018/09/21/%E7%AC%AC%E5%8D%81%E7%AF%87/"/>
    <id>http://example.com/2018/09/21/%E7%AC%AC%E5%8D%81%E7%AF%87/</id>
    <published>2018-09-21T07:45:28.000Z</published>
    <updated>2022-08-04T12:44:17.116Z</updated>
    
    <content type="html"><![CDATA[<p>配置文件:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//shiy.js</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="function">()=&gt;</span>&#123;</span><br><span class="line"><span class="title function_">res</span>()</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// 调用函数进行获取html根字体的大小</span></span><br><span class="line"><span class="title function_">res</span>()</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">let</span> <span class="title function_">res</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"><span class="comment">// 当前代码是获取可视窗口的宽度 除以16 16是默认字体大小</span></span><br><span class="line"><span class="keyword">let</span> width = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span> / <span class="number">16</span>;</span><br><span class="line"><span class="comment">// 设置html根字体大小</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">fontSize</span> = width + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"><span class="comment">// 获取html根字体大小</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;html&#x27;</span>)[<span class="number">0</span>].<span class="property">style</span>.<span class="property">fontSize</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> mixin <span class="keyword">from</span> <span class="string">&#x27;./components/mixin.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./shiy.js&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.title</span>&#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">1.5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.head</span>&#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">2rem</span>;</span><br><span class="line"><span class="attribute">text-align</span>: center;</span><br><span class="line"><span class="attribute">background-color</span>: aquamarine;</span><br><span class="line"><span class="attribute">height</span>: <span class="number">5rem</span>;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;配置文件:&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue项目excel导入+导出</title>
    <link href="http://example.com/2018/09/15/%E7%AC%AC%E4%B9%9D%E7%AF%87/"/>
    <id>http://example.com/2018/09/15/%E7%AC%AC%E4%B9%9D%E7%AF%87/</id>
    <published>2018-09-15T02:25:08.000Z</published>
    <updated>2022-08-04T12:41:24.267Z</updated>
    
    <content type="html"><![CDATA[<p>导入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**下载excel模板 */</span></span><br><span class="line">&lt;a href=<span class="string">&quot;http://192.168.13.146:8000/static/huike模板.xlsx&quot;</span>&gt;下载模板&lt;/a&gt;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**上传文件 */</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Dragger</span> &#123;<span class="attr">...props</span>&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;ant-upload-drag-icon&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">InboxOutlined</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;ant-upload-text&quot;</span>&gt;</span>Click or drag file to this area to upload<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">className</span>=<span class="string">&quot;ant-upload-hint&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Dragger</span>&gt;</span></span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**通过pandas numpy sqlalchemy模块完成导入数据库 */</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine</span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">batchimportcustomer</span>(<span class="params">req</span>):</span><br><span class="line">    fileobj=req.FILES.get(<span class="string">&#x27;file&#x27;</span>)</span><br><span class="line">    excel_raw_data = pd.read_excel(fileobj)</span><br><span class="line">    excel_raw_data.dropna(inplace=<span class="literal">True</span>)</span><br><span class="line">    excel_raw_data.columns = [<span class="string">&#x27;Dept_id&#x27;</span>, <span class="string">&#x27;nickname&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;phone&#x27;</span>, <span class="string">&#x27;sex&#x27;</span>,<span class="string">&#x27;state&#x27;</span>]</span><br><span class="line">    excel_raw_data.drop_duplicates(<span class="string">&#x27;nickname&#x27;</span>, inplace=<span class="literal">True</span>)</span><br><span class="line">    excel_raw_data.loc[:, <span class="string">&#x27;phone&#x27;</span>: <span class="string">&#x27;sex&#x27;</span>] = excel_raw_data.loc[:, <span class="string">&#x27;phone&#x27;</span>: <span class="string">&#x27;sex&#x27;</span>].replace \</span><br><span class="line">        (<span class="string">&#x27;男&#x27;</span>, <span class="number">0</span>).replace(<span class="string">&#x27;女&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    excel_raw_data.loc[:, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;state&#x27;</span>] = excel_raw_data.loc[:, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;state&#x27;</span>].replace \</span><br><span class="line">        (<span class="string">&#x27;正常&#x27;</span>, <span class="number">1</span>).replace(<span class="string">&#x27;停用&#x27;</span>, <span class="number">0</span>)</span><br><span class="line">    excel_raw_data[<span class="string">&#x27;create_time&#x27;</span>] = datetime.datetime.now()</span><br><span class="line">    engine = create_engine(<span class="string">&#x27;mysql+pymysql://root:123456@127.0.0.1:3306/huike&#x27;</span>)</span><br><span class="line">    excel_raw_data.to_sql(<span class="string">&#x27;customermodel&#x27;</span>, engine, if_exists=<span class="string">&quot;append&quot;</span>, index=<span class="literal">False</span>, chunksize=<span class="number">200</span>)</span><br><span class="line">    <span class="keyword">return</span> JsonResponse(&#123;<span class="string">&#x27;status&#x27;</span>: <span class="number">200</span>, <span class="string">&#x27;data&#x27;</span>: <span class="string">&#x27;批量导入成功&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>导出:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**通过react-csv模块 */</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CSVLink</span> &#125; <span class="keyword">from</span> <span class="string">&quot;react-csv&quot;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">/**rolelist:需要导出的数据 </span></span><br><span class="line"><span class="comment">   headers:定义表头</span></span><br><span class="line"><span class="comment">   const headers = [</span></span><br><span class="line"><span class="comment">        &#123; label: &quot;角色名称&quot;, key: &quot;rolename&quot; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; label: &quot;角色描述&quot;, key: &quot;desc&quot; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; label: &quot;状态&quot;, key: &quot;state&quot; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; label: &quot;创建时间&quot;, key: &quot;create_time&quot; &#125;,</span></span><br><span class="line"><span class="comment">        &#123; label: &quot;菜单权限&quot;, key: &quot;meaulist&quot; &#125;,</span></span><br><span class="line"><span class="comment">   ];</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">Button</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">float:</span> &quot;<span class="attr">right</span>&quot;,<span class="attr">marginRight:</span>&quot;<span class="attr">75px</span>&quot; &#125;&#125; <span class="attr">shape</span>=<span class="string">&quot;round&quot;</span> <span class="attr">size</span>=<span class="string">&quot;large&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">CSVLink</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml">     <span class="attr">filename</span>=<span class="string">&#123;</span>&quot;角色列表<span class="attr">.csv</span>&quot;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">     <span class="attr">headers</span>=<span class="string">&#123;headers&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">     <span class="attr">data</span>=<span class="string">&#123;rolelist&#125;</span>&gt;</span>导出<span class="tag">&lt;/<span class="name">CSVLink</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;导入&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;spa</summary>
      
    
    
    
    <category term="vue" scheme="http://example.com/categories/vue/"/>
    
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>django正反向查询技巧</title>
    <link href="http://example.com/2018/09/11/%E7%AC%AC%E5%85%AB%E7%AF%87/"/>
    <id>http://example.com/2018/09/11/%E7%AC%AC%E5%85%AB%E7%AF%87/</id>
    <published>2018-09-11T06:05:06.000Z</published>
    <updated>2022-08-04T12:25:09.943Z</updated>
    
    <content type="html"><![CDATA[<p>表结构:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 房产表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HouseProperty</span>(models.Model):</span><br><span class="line">    people = models.ForeignKey(to=<span class="string">&#x27;Population&#x27;</span>, on_delete=models.SET_NULL, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    address = models.CharField(<span class="string">&#x27;房产地址&#x27;</span>, max_length=<span class="number">256</span>)</span><br><span class="line">    serial_number = models.CharField(<span class="string">&#x27;编号&#x27;</span>, max_length=<span class="number">128</span>)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 人口表</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Population</span>(models.Model):</span><br><span class="line">    brigade = models.CharField(<span class="string">&#x27;第几大队&#x27;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    name = models.CharField(<span class="string">&#x27;姓名&#x27;</span>, max_length=<span class="number">64</span>)</span><br><span class="line">    id_card = models.CharField(<span class="string">&#x27;身份证号&#x27;</span>, max_length=<span class="number">32</span>, unique=<span class="literal">True</span>)</span><br><span class="line">    age = models.IntegerField(<span class="string">&#x27;年龄&#x27;</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    sex = models.CharField(<span class="string">&#x27;性别&#x27;</span>, max_length=<span class="number">3</span>, default=<span class="string">&#x27;男&#x27;</span>)</span><br><span class="line">    native_place = models.CharField(<span class="string">&#x27;籍贯&#x27;</span>, max_length=<span class="number">32</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    phone = models.CharField(<span class="string">&#x27;联系方式&#x27;</span>, max_length=<span class="number">16</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    current_address = models.CharField(<span class="string">&#x27;现居住地&#x27;</span>, max_length=<span class="number">256</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    cohabit_people_id_list = models.CharField(<span class="string">&#x27;户号&#x27;</span>, max_length=<span class="number">64</span>, default=<span class="string">&quot;&quot;</span>)</span><br><span class="line">    isvillage = models.CharField(<span class="string">&#x27;房东/租客&#x27;</span>, max_length=<span class="number">64</span>,null=<span class="literal">True</span>)</span><br><span class="line">    isfamily_host = models.BooleanField(<span class="string">&#x27;是否是户主&#x27;</span>, default=<span class="literal">True</span>)</span><br><span class="line">    job = models.CharField(<span class="string">&#x27;职位&#x27;</span>, max_length=<span class="number">32</span>, blank=<span class="literal">True</span>, null=<span class="literal">True</span>)</span><br><span class="line">    type_list = ((<span class="number">0</span>, <span class="string">&#x27;停用&#x27;</span>), (<span class="number">1</span>, <span class="string">&#x27;正常&#x27;</span>))</span><br><span class="line">    status = models.IntegerField(<span class="string">&#x27;状态&#x27;</span>, choices=type_list, default=<span class="number">1</span>)</span><br><span class="line">    liquefied_bottle_num = models.IntegerField(<span class="string">&#x27;液化气瓶数量&#x27;</span>, default=<span class="number">0</span>)</span><br><span class="line">    create_time = models.DateTimeField(<span class="string">&#x27;创建时间&#x27;</span>, auto_now_add=<span class="literal">True</span>)</span><br><span class="line">    update_time = models.DateTimeField(<span class="string">&#x27;更新时间&#x27;</span>, auto_now=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>反向查询:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data = <span class="built_in">list</span>(models.Population.objects.<span class="built_in">filter</span>(houseproperty__serial_number=<span class="number">110</span>)[start:end].values())</span><br></pre></td></tr></table></figure><p>正向查询:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**第一种 */</span><br><span class="line">house = models.HouseProperty.objects.<span class="built_in">all</span>()[start:end].values(<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;address&#x27;</span>, <span class="string">&#x27;serial_number&#x27;</span>,</span><br><span class="line">                                                                             <span class="string">&#x27;people__phone&#x27;</span>,</span><br><span class="line">                                                                             <span class="string">&#x27;people__name&#x27;</span>, <span class="string">&#x27;people__phone&#x27;</span>,</span><br><span class="line">                                                                             <span class="string">&#x27;people__current_address&#x27;</span>,</span><br><span class="line">                                                                             <span class="string">&#x27;people__native_place&#x27;</span>,</span><br><span class="line">                                                                             <span class="string">&#x27;people__id_card&#x27;</span>)</span><br><span class="line">/**第二种 */</span><br><span class="line">child=models.HouseProperty.objects.<span class="built_in">filter</span>(people__name=<span class="string">&#x27;张三&#x27;</span>).values()</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;表结构:&lt;/p&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;b</summary>
      
    
    
    
    <category term="django" scheme="http://example.com/categories/django/"/>
    
    
    <category term="django" scheme="http://example.com/tags/django/"/>
    
  </entry>
  
</feed>
